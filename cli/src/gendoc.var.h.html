

	<!-- highlight.js for c++ syntax highlighting -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
	<!-- done below <script>hljs.highlightAll();</script> -->

<style>

/* Change highlight.js comments from default grey to green */
.hljs-comment,
.hljs-quote {
	color: #008000; /* This is green, you can adjust the shade as per your preference */
	font-style: italic; /* Optional: You might want to keep comments italicized */
}

</style>

<script>
	//// Extend C++ language definition
	//const cppLanguage = hljs.getLanguage('cpp');
	//if (cppLanguage) {
	//	// Adding custom keywords
	//	cppLanguage.keywords = {
	//		...cppLanguage.keywords,
	//		keyword: cppLanguage.keywords.keyword + ' round chr textchr',
	//		// You can also add to other categories like 'literal', 'built_in', etc.
	//	};
	//	// Register the modified language
	//	hljs.registerLanguage('cpp', cppLanguage);
	//}

	// Initialize highlight.js
	document.addEventListener('DOMContentLoaded', (event) => {
	    hljs.highlightAll();
	});
</script>



	<!-- bootstrap css. Is this necessary? -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<style>

body {
	margin: 10px;
}

pre {
	margin: 0px;
	white-space: pre-wrap;
	word-wrap: break-word;
	white-space: -moz-pre-wrap;
	white-space: -pre-wrap;
	white-space: -o-pre-wrap;
	overflow-wrap: break-word;
	overflow-x: auto;
}

table, th, td {
	border: 1px solid #a2a9b1;
}

th {
	background-color: #eaecf0;
	font-weight: bold;
	text-align: left;
	padding: 8px;
}

td {
	padding: 0.2em 0.4em;
	vertical-align: top;
}

p {
  margin: 0.4em 0 0.5em 0;
}

.toc, .toccolours {
	border: 1px solid #a2a9b1;
	background-color: #f8f9fa;
	padding: 5px;
	font-size: 95%;
}
.toc {
	display: table;
	padding: 7px;
}

.wikitable {
	background-color: #f8f9fa;
	color: #202122;
	margin: 1em 0;
	border: 1px solid #a2a9b1;
	border-collapse: collapse;
}
    img {
        border: 0;
        vertical-align: middle
    }

    hr {
        height: 1px;
        background-color: #a2a9b1;
        border: 0;
        margin: 0.2em 0
    }

    h1,h2,h3,h4,h5,h6 {
        color: #000;
        margin: 0;
        padding-top: 0.5em;
        padding-bottom: 0.17em;
        overflow: hidden
    }

    h1,h2 {
        margin-bottom: 0.6em;
        border-bottom: 1px solid #a2a9b1
    }

    h3,h4,h5 {
        margin-bottom: 0.3em
    }

    h1 {
        font-size: 188%;
        font-weight: normal
    }

    h2 {
        font-size: 150%;
        font-weight: normal
    }

    h3 {
        font-size: 128%
    }

    h4 {
        font-size: 116%
    }

    h5 {
        font-size: 108%
    }

    h6 {
        font-size: 100%
    }

    p {
        margin: 0.4em 0 0.5em 0
    }

    p img {
        margin: 0
    }

    ul {
        margin: 0.3em 0 0 1.6em;
        padding: 0
    }

    ol {
        margin: 0.3em 0 0 3.2em;
        padding: 0;
        list-style-image: none
    }

    li {
        margin-bottom: 0.1em
    }

    dt {
        font-weight: bold;
        margin-bottom: 0.1em
    }

    dl {
        margin-top: 0.2em;
        margin-bottom: 0.5em
    }

    dd {
        margin-left: 1.6em;
        margin-bottom: 0.1em
    }

.gendoc_function {
    color: #800;
    font-weight: 700;
}

</style>


<div class=toc>
<h4>Contents:</h4>
<ol>
<li><a href=#String_Creation>String Creation</a></li>
<li><a href=#String_Scanning>String Scanning</a></li>
<li><a href=#String_Conversion_-_Non-Mutating_-_Chainable>String Conversion - Non-Mutating - Chainable</a></li>
<li><a href=#String_Conversion_-_Mutating_-_Standalone_Commands>String Conversion - Mutating - Standalone Commands</a></li>
<li><a href=#I/O_Conversion>I/O Conversion</a></li>
<li><a href=#Dynamic_Array_Functions>Dynamic Array Functions</a></li>
<li><a href=#Dynamic_Array_Filters>Dynamic Array Filters</a></li>
<li><a href=#Dynamic_Array_Mutators_Standalone_Commands>Dynamic Array Mutators Standalone Commands</a></li>
<li><a href=#Dynamic_Array_Search>Dynamic Array Search</a></li>
<li><a href=#Database_Access>Database Access</a></li>
<li><a href=#Database_Management>Database Management</a></li>
<li><a href=#Database_File_I/O>Database File I/O</a></li>
<li><a href=#Database_Sort/Select>Database Sort/Select</a></li>
<li><a href=#OS_Time/Date>OS Time/Date</a></li>
<li><a href=#OS_File_I/O>OS File I/O</a></li>
<li><a href=#OS_Directories>OS Directories</a></li>
<li><a href=#OS_Shell/Environment>OS Shell/Environment</a></li>
<li><a href=#Output>Output</a></li>
<li><a href=#Input>Input</a></li>
<li><a href=#Math/Boolean>Math/Boolean</a></li>
<li><a href=#I/O_Conversion_Codes_>I/O Conversion Codes </a></li>

</ol>
</div>
Generated by cli/gendoc from var.h

<h5 id=String_Creation>String Creation</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>round</span>(ndecimals = 0)</td><td><em>Returns:</em> A string representation of a decimal number rounded to a desired number of decimal places</p>
<em>Returns:</em> A var ASCII string with exact decimal places requested.</p>
.5 always rounds away from zero.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(0.295).round(2); // "0.30"
// or
let v2 = round(1.295, 2); // "1.30"

var v3 = var(-0.295).round(2); // "-0.30"
// or
var v4 = round(-1.295, 2); // "-1.30"</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>chr</span>(num)</td><td><em>Returns:</em> A string containing a single char (byte) given an integer 0-255.</p>
0-127 -> ASCII, 128-255 -> invalid UTF-8 so cannot be written to database or used various exodus string operations

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var().chr(0x61); // "a"
// or
let v2 = chr(0x61);</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>textchr</span>(num)</td><td><em>Returns:</em> A string of a single unicode code point in utf8 encoding.</p>
To get utf codepoints > 2^63 you must provide negative ints</p>
Not providing implicit constructor from var to unsigned int due to getting ambigious conversions</p>
since int and unsigned int are parallel priority in c++ implicit conversions

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var().textchr(171416); // "©∂ò" // or "\xF0A9B698"
// or
let v2 = textchr(171416);</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>str</span>(num)</td><td><em>Returns:</em> A string of repeating characters or strings

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "ab"_var.str(3); // "ababab"
// or
let v2 = str("ab", 3);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>space</span>()</td><td><em>Returns:</em> A string of space characters.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(3).space(); // "‚ê£‚ê£‚ê£"
// or
let v2 = space(3);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>numberinwords</span>(languagename_or_locale_id = "")</td><td><em>Returns:</em> A string representing a given number written in words instead of digits.</p>
locale: Something like en_GB, ar_AE, el_CY, es_US, fr_FR etc.

<pre><code class='hljs-ncdecl language-javascript'>let softhyphen = "\xc2\xad";
let v1 = var(123.45).numberinwords("de_DE").replace(softhyphen, " "); // "ein‚ê£hundert‚ê£drei‚ê£und‚ê£zwanzig‚ê£Komma‚ê£vier‚ê£f√ºnf"</code></pre>
</td></tr>
</table>
<h5 id=String_Scanning>String Scanning</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>seq</span>()</td><td><em>Returns:</em> The character number of the first char.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.seq(); // 0x61 // decimal 97
// or
let v2 = seq("abc");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>textseq</span>()</td><td><em>Returns:</em> The Unicode character number of the first unicode code point.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "Œì"_var.textseq(); // 915 // U+0393: Greek Capital Letter Gamma (Unicode Character)
// or
let v2 = textseq("Œì");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>len</span>()</td><td><em>Returns:</em> The length of a string in number of chars

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.len(); // 3
// or
let v2 = len("abc");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>textwidth</span>()</td><td><em>Returns:</em> The number of output columns.</p>
Allows multi column unicode and reduces combining characters etc. like e followed by grave accent</p>
Possibly does not properly calculate combining sequences of graphemes e.g. face followed by colour

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "ü§°xü§°"_var.textwidth(); // 5
// or
let v2 = textwidth("ü§°xü§°");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>textlen</span>()</td><td><em>Returns:</em> The number of Unicode code points

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "ŒìŒπŒ¨ŒΩŒΩŒ∑œÇ"_var.textlen(); // 7
// or
let v2 = textlen("ŒìŒπŒ¨ŒΩŒΩŒ∑œÇ");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>fcount</span>(sepstr)</td><td><em>Returns:</em> The count of the number of fields separated by a given sepstr.</p>
It is the same as var.count(sepstr) + 1 except that it returns 0 for an empty string.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "aa**cc"_var.fcount("*"); // 3
// or
let v2 = fcount("aa**cc", "*");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>count</span>(sepstr)</td><td><em>Returns:</em> The count of the number of sepstr found.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "aa**cc"_var.count("*"); // 2
// or
let v2 = count("aa**cc", "*");</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>starts</span>(prefix)</td><td><em>Returns:</em> True if starts with prefix

<pre><code class='hljs-ncdecl language-javascript'>if ("abc"_var.starts("ab")) ... true
// or
if (starts("abc", "ab")) ... true</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>ends</span>(suffix)</td><td><em>Returns:</em> True if ends with suffix

<pre><code class='hljs-ncdecl language-javascript'>if ("abc"_var.ends("bc")) ... true
// or
if (ends("abc", "bc")) ... true</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>contains</span>(substr)</td><td><em>Returns:</em> True if starts, ends or contains substr

<pre><code class='hljs-ncdecl language-javascript'>if ("abcd"_var.contains("bc")) ... true
// or
if (contains("abcd", "bc")) ... true</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>index</span>(substr, startchar1 = 1)</td><td><em>Returns:</em> The index (1 based position) of a given substr on or after a given starting char number if present</p>
<em>Returns:</em> 0 if not present.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abcd"_var.index("bc"); // 2
// or
let v2 = index("abcd", "bc");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>indexn</span>(substr, occurrence)</td><td><em>Returns:</em> The index (1 based position) of the nth occurrence of a given substr if present</p>
<em>Returns:</em> 0 if not present.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abcabc"_var.index("bc", 2); // 2
// or
let v2 = index("abcabc", "bc", 2);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>indexr</span>(substr, startchar1 = -1)</td><td>Reverse substr search.</p>
<em>Returns:</em> The index (1 based position) of the substr on or before a given starting char number if present</p>
startchar1 defaults to -1 meaning start searching from the last char (towards the first char).

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abcabc"_var.indexr("bc"); // 5
// or
let v2 = indexr("abcabc", "bc");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>match</span>(regex_str, regex_options = "")</td><td><em>Returns:</em> All results of regex matching</p>
Multiple matches are returned separated by FMs. Groups are in VMs.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc1abc2"_var.match("BC(\\d)", "i"); // "bc1]1^bc2]2"_var
// or
let v2 = match("abc1abc2", "BC(\\d)", "i");</code></pre>

regex_options:</p>
</p>
l - Literal (any regex chars are treated as normal chars)</p>
</p>
i - Case insensitive</p>
</p>
p - ECMAScript/Perl (the default)</p>
b - Basic POSIX (same as sed)</p>
e - Extended POSIX</p>
a - awk</p>
g - grep</p>
eg - egrep or grep -E</p>
</p>
char ranges like a-z are locale sensitive if ECMAScript</p>
</p>
m - Multiline. Default in boost (and therefore exodus)</p>
s - Single line. Default in std::regex</p>
</p>
f - First only. Only for replace() (not match() or search())</p>
</p>
w - Wildcard glob style (e.g. *.cfg) not regex style. Only for match() and search(). Not replace().</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>match</span>(regex)</td><td>Ditto</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>search</span>(regex_str, io startchar1, regex_options = "")</td><td>Search for first match of a regular expression starting at startchar1</p>
Updates startchar1 ready to search for the next match</p>
regex_options as for match()

<pre><code class='hljs-ncdecl language-javascript'>var startchar1 = 1;
let v1 = "abc1abc2"_var.search("BC(\\d)", startchar1, "i"); // "bc1]1"_var // startchar1 -> 5 /// Ready for the next search
// or
startchar1 = 1;
let v2 = search("abc1abc2", "BC(\\d)", startchar1, "i");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>search</span>(regex_str)</td><td>Ditto starting from first char</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>search</span>(regex, io startchar1)</td><td>Ditto given a rex</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>search</span>(regex)</td><td>Ditto starting from first char.</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>hash</span>(std::uint64_t modulus = 0)</td><td>Hash by default returns a 64 bit signed integer as a var.</p>
If a modulus is provided then the result is limited to [0, modulus)</p>
MurmurHash3 is used.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.hash(); assert(v1 == var(6'715'211'243'465'481'821));
// or
let v2 = hash("abc");</code></pre>
</td></tr>
</table>
<h5 id=String_Conversion_-_Non-Mutating_-_Chainable>String Conversion - Non-Mutating - Chainable</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>ucase</span>()</td><td>To upper case

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "ŒìŒπŒ¨ŒΩŒΩŒ∑œÇ"_var.ucase(); // "ŒìŒôŒÜŒùŒùŒóŒ£"
// or
let v2 = ucase("ŒìŒπŒ¨ŒΩŒΩŒ∑œÇ");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>lcase</span>()</td><td>To lower case

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "ŒìŒôŒÜŒùŒùŒóŒ£"_var.lcase(); // "Œ≥ŒπŒ¨ŒΩŒΩŒ∑œÇ"
// or
let v2 = lcase("ŒìŒôŒÜŒùŒùŒóŒ£");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>tcase</span>()</td><td>To title case (first letters are capitalised)

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "Œ≥ŒπŒ¨ŒΩŒΩŒ∑œÇ"_var.tcase(); // "ŒìŒπŒ¨ŒΩŒΩŒ∑œÇ"
// or
let v2 = tcase("Œ≥ŒπŒ¨ŒΩŒΩŒ∑œÇ");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>fcase</span>()</td><td>To folded case (lower case and remove accents for indexing)</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>normalize</span>()</td><td>Normalises unicode code points sequences to their standardised NFC form making them binary comparable.</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>invert</span>()</td><td>Simple reversible disguising of text</p>
invert(invert()) returns to original.</p>
Flips bit 8 of unicode code points. Note that ASCII bytes become multibyte UTF-8 so string sizes change.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.invert(); // "\xC2" "\x9E" "\xC2" "\x9D" "\xC2" "\x9C"
// or
let v2 = invert("abc");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>lower</span>()</td><td>Convert all FM to VM, VM to SM etc.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "a1^b2^c3"_var.lower(); // "a1]b2]c3"_var
// or
let v2 = lower("a1^b2^c3"_var);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>raise</span>()</td><td>Convert all VM to FM, SM to VM etc.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "a1]b2]c3"_var.raise(); // "a1^b2^c3"_var
// or
let v2 = "a1]b2]c3"_var;</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>crop</span>()</td><td>Remove any redundant FM, VM etc. characters (Trailing FM; VM before FM etc.)

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "a1^b2]]^c3^^"_var.crop(); // "a1^b2^c3"_var
// or
let v2 = crop("a1^b2]]^c3^^"_var);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>quote</span>()</td><td>Wrap in double quotes

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.quote(); // "\"abc\""
// or
let v2 = quote("abc");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>squote</span>()</td><td>Wrap in single quotes

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.squote(); // "'abc'"
// or
let v2 = squote("abc");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>unquote</span>()</td><td>Remove one pair of double or single quotes

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "'abc'"_var.unquote(); // "abc"
// or
let v2 = unquote("'abc'");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>trim</span>(trimchars = " ")</td><td>Remove leading, trailing and excessive inner bytes

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "‚ê£‚ê£a1‚ê£‚ê£b2‚ê£c3‚ê£‚ê£"_var.trim(); // "a1‚ê£b2‚ê£c3"
// or
let v2 = trim("‚ê£‚ê£a1‚ê£‚ê£b2‚ê£c3‚ê£‚ê£");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>trimfirst</span>(trimchars = " ")</td><td>Ditto leading

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "‚ê£‚ê£a1‚ê£‚ê£b2‚ê£c3‚ê£‚ê£"_var.trimfirst(); // "a1‚ê£‚ê£b2‚ê£c3‚ê£‚ê£"
// or
let v2 = trimfirst("‚ê£‚ê£a1‚ê£‚ê£b2‚ê£c3‚ê£‚ê£");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>trimlast</span>(trimchars = " ")</td><td>Ditto trailing

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "‚ê£‚ê£a1‚ê£‚ê£b2‚ê£c3‚ê£‚ê£"_var.trimlast(); // "‚ê£‚ê£a1‚ê£‚ê£b2‚ê£c3"
// or
let v2 = trimlast("‚ê£‚ê£a1‚ê£‚ê£b2‚ê£c3‚ê£‚ê£");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>trimboth</span>(trimchars = " ")</td><td>Ditto leading, trailing but not inner

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "‚ê£‚ê£a1‚ê£‚ê£b2‚ê£c3‚ê£‚ê£"_var.trimboth(); // "a1‚ê£‚ê£b2‚ê£c3"
// or
let v2 = trimboth("‚ê£‚ê£a1‚ê£‚ê£b2‚ê£c3‚ê£‚ê£");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>first</span>()</td><td>Extract first char or "" if empty

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.first(); // "a"
// or
let v2 = first("abc");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>last</span>()</td><td>Extract last char or "" if empty

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.last(); // "c"
// or
let v2 = last("abc");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>first</span>(std::size_t length)</td><td>Extract up to length leading chars

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.first(2); // "ab"
// or
let v2 = first("abc", 2);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>last</span>(std::size_t length)</td><td>Extract up to length trailing chars

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.last(2); // "bc"
// or
let v2 = last("abc", 2);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>cut</span>(length)</td><td>Remove length leading chars

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abcd"_var.cut(2); // "cd"
// or
let v2 = cut("abcd", 2);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>paste</span>(pos1, length, insertstr)</td><td>Insert text at char position overwriting length chars

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abcd"_var.paste(2, 2, "XYZ"); // "aXYZd"
// or
let v2 = paste("abcd", 2, 2, "XYZ");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>paste</span>(pos1, insertstr)</td><td>Insert text at char position without overwriting any following characters

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abcd"_var.paste(2, "XYZ"); // "aXYZbcd"
// or
let v2 = paste("abcd", 2, "XYZ");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>prefix</span>(insertstr)</td><td>Insert text at the beginning

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.prefix("XYZ"); // "XYZabc"
// or
let v2 = prefix("abc", "XYZ");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>append</span>(appendable, ...)</td><td>Append text at the end

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.append(" is ", 10, " ok", '.'); // "abc is 10 ok."
// or
let v2 = append("abc", " is ", 10, " ok", '.');</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>pop</span>()</td><td>Remove one trailing char

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc"_var.pop(); // "ab"
// or
let v2 = pop("abc");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>field</span>(strx, fieldnx = 1, nfieldsx = 1)</td><td>Extract one or more consecutive fields given a delimiter char or substr.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "aa*bb*cc"_var.field("*", 2); // "bb"
// or
let v2 = field("aa*bb*cc", "*", 2);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>field2</span>(separator, fieldno, nfields = 1)</td><td>field2 is a version that treats fieldn -1 as the last field, -2 the penultimate field etc. -</p>
TODO Should probably make field() do this (since -1 is basically an erroneous call) and remove field2</p>
Same as var.field() but negative fieldnos work backwards from the last field.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "aa*bb*cc"_var.field2("*", -1); // "cc"
// or
let v2 = field2("aa*bb*cc", "*", -1);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>fieldstore</span>(separator, fieldno, nfields, replacement)</td><td>fieldstore() replaces n fields of subfield(s) in a string.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "aa*bb*cc*dd"_var.fieldstore("*", 2, 3, "X*Y"); // "aa*X*Y*"
// or
let v2 = fieldstore("aa*bb*cc*dd", "*", 2, 3, "X*Y");</code></pre>

If nfields is 0 then insert fields before fieldno

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "a1*b2*c3*d4"_var.fieldstore("*", 2, 0, "X*Y"); // "a1*X*Y*b2*c3*d4"
// or
let v2 = fieldstore("a1*b2*c3*d4", "*", 2, 0, "X*Y");</code></pre>

If nfields is negative then delete abs(n) fields before inserting.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "a1*b2*c3*d4"_var.fieldstore("*", 2, -3, "X*Y"); // "a1*X*Y"
// or
let v2 = fieldstore("a1*b2*c3*d4", "*", 2, -3, "X*Y");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>substr</span>(pos1, length)</td><td>substr version 1. Extract length chars starting at pos1

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abcd"_var.substr(2, 2); // "bc"
// or
let v2 = substr("abcd", 2, 2);</code></pre>

If length is negative then work backwards and return chars reversed

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abcd"_var.substr(3, -2); // "cb"
// or
let v2 = substr("abcd", 3, -2);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>b</span>(pos1, length)</td><td>Same as substr version 1.</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>substr</span>(pos1)</td><td>substr version 2. Extract all chars from pos1 up to the end

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abcd"_var.substr(2); // "bcd"
// or
let v2 = substr("abcd", 2);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>b</span>(pos1)</td><td>Same as substr version 2.</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>substr</span>(pos1, delimiterchars, io pos2)</td><td>substr version 3.</p>
Extract a substr starting from pos1 up to any one of some given delimiter chars</p>
Also returns in pos2 the pos of the following delimiter or one past the end of the string if not found.</p>
Add 1 to pos2 start the next search if continuing.

<pre><code class='hljs-ncdecl language-javascript'>var pos1a = 4, pos2a;
let v1 = "aa,bb,cc"_var.substr(pos1a, ",", pos2a); // "bb" // pos2a -> 6
// or
var pos1b = 4, pos2b;
let v2 = substr("aa,bb,cc", pos1b, ",", pos2b);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>b</span>(pos1, delimiterchars, io pos2)</td><td>Alias of substr version 3.</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>substr2</span>(io pos1, out delimiterno)</td><td>substr version 4.</p>
<em>Returns:</em> A substr from a given pos1 up to the next RM/FM/VM/SM/TM/ST delimiter char.</p>
Also returns the next index/offset and the delimiter no. found (1-6) or 0 if not found.

<pre><code class='hljs-ncdecl language-javascript'>var pos1a = 4, delim1;
let v1 = "aa^bb^cc"_var.substr2(pos1a, delim1); // "bb" // pos1a -> 7 // delim1 -> 2
// or
var pos1b = 4, delim2;
let v2 = substr2("aa^bb^cc"_var, pos1b, delim2);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>b2</span>(io pos1, out delimiterno)</td><td>Alias of substr version 4</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>convert</span>(fromchars, tochars)</td><td>Convert chars to other chars one for one or delete where tochars is shorter.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abcde"_var.convert("aZd", "XY"); // "Xbce" // a is replaced and d is removed
// or
let v2 = convert("abcde", "aZd", "XY");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>textconvert</span>(fromchars, tochars)</td><td>Ditto for Unicode code points.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "aü§°büòÄcüåçd"_var.textconvert("ü§°üòÄ", "üëã"); // "aüëãbcüåçd"
// or
let v2 = textconvert("aü§°büòÄcüåçd", "ü§°üòÄ", "üëã");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>replace</span>(fromstr, tostr)</td><td>Replace all occurrences of a substr with another. Case sensitive

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "Abc.Abc"_var.replace("bc", "X"); // "AX.AX"
// or
let v2 = replace("Abc Abc", "bc", "X");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>replace</span>(regex, tostr)</td><td>Replace substring(s) using a regular expression.</p>
Use $0, $1, $2 in tostr to refer to groups defined in the regex.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "A a B b"_var.replace("[A-Z]"_rex, "'$0'"); // "'A' a 'B' b"
// or
let v2 = replace("A a B b", "[A-Z]"_rex, "'$0'");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>unique</span>()</td><td>Remove duplicate fields in an FM or VM etc. separated list

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "a1^b2^a1^c2"_var.unique(); // "a1^b2^c2"_var
// or
let v2 = unique("a1^b2^a1^c2"_var);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>sort</span>(sepchar = FM)</td><td>Reorder fields in an FM or VM etc. separated list in ascending order</p>
Numerical:

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "20^10^2^1^1.1"_var.sort(); // "1^1.1^2^10^20"_var
// or
let v2 = sort("20^10^2^1^1.1"_var);</code></pre>

Alphabetical:

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "b1^a1^c20^c10^c2^c1^b2"_var.sort(); // "a1^b1^b2^c1^c10^c2^c20"_var
// or
let v2 = sort("b1^a1^c20^c10^c2^c1^b2"_var);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>reverse</span>(sepchar = FM)</td><td>Reorder fields in an FM or VM etc. separated list in descending order

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "20^10^2^1^1.1"_var.reverse(); // "1.1^1^2^10^20"_var
// or
let v2 = reverse("20^10^2^1^1.1"_var);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>shuffle</span>(sepchar = FM)</td><td>Randomise the order of fields in an FM, VM separated list

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "20^10^2^1^1.1"_var.shuffle(); /// e.g. "2^1^20^1.1^10" (random order depending on initrand())
// or
let v2 = shuffle("20^10^2^1^1.1"_var);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>parse</span>(char sepchar = ' ')</td><td>Replace separator characters with FM char except inside double or single quotes ignoring escaped quotes &bsol;" &bsol;'

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "abc,\"def,\"123\" fgh\",12.34"_var.parse(','); // "abc^\"def,\"123\" fgh\"^12.34"_var
// or
let v2 = parse("abc,\"def,\"123\" fgh\",12.34", ',');</code></pre>
</td></tr>
</table>
<h5 id=String_Conversion_-_Mutating_-_Standalone_Commands>String Conversion - Mutating - Standalone Commands</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>ucaser</span>()</td><td>Upper case</p>
All string mutators follow the same pattern as ucaser.<br>See the non-mutating functions for details.

<pre><code class='hljs-ncdecl language-javascript'>var v1 = "abc";
v1.ucaser(); // "ABC"
// or
ucaser(v1);</code></pre>
</td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>lcaser</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>tcaser</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>fcaser</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>normalizer</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>inverter</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>quoter</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>squoter</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>unquoter</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>lowerer</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>raiser</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>cropper</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>trimmer</span>(trimchars = " ")</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>trimmerfirst</span>(trimchars = " ")</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>trimmerlast</span>(trimchars = " ")</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>trimmerboth</span>(trimchars = " ")</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>firster</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>laster</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>firster</span>(std::size_t length)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>laster</span>(std::size_t length)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>cutter</span>(length)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>paster</span>(pos1, length, insertstr)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>paster</span>(pos1, insertstr)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>prefixer</span>(insertstr)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>appender</span>(appendable, ...)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>popper</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>fieldstorer</span>(sepchar, fieldno, nfields, replacement)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>substrer</span>(pos1, length)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>substrer</span>(pos1)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>converter</span>(fromchars, tochars)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>textconverter</span>(fromchars, tochars)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>replacer</span>(regex, tostr)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>replacer</span>(fromstr, tostr)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>uniquer</span>()</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>sorter</span>(sepchar = FM)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>reverser</span>(sepchar = FM)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>shuffler</span>(sepchar = FM)</td><td></td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>parser</span>(char sepchar = ' ')</td><td></td></tr>
</table>
<h5 id=I/O_Conversion>I/O Conversion</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>var=</td><td>var.<span class='gendoc_function'>oconv</span>(convstr)</td><td>Converts internal data to output external display format according to a given conversion code or pattern</p>
If the internal data is invalid and cannot be converted then most conversions return the ORIGINAL data unconverted</p>
Throws a runtime error VarNotImplemented if convstr is invalid</p>
See [[#ICONV/OCONV PATTERNS]]

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(30123).oconv("D/E"); // "21/06/2050"
// or
let v2 = oconv(30123, "D/E");</code></pre>
</td></tr>
<tr><td>var=</td><td>var.<span class='gendoc_function'>iconv</span>(convstr)</td><td>Converts external data to internal format according to a given conversion code or pattern</p>
If the external data is invalid and cannot be converted then most conversions return the EMPTY STRING ""</p>
Throws a runtime error VarNotImplemented if convstr is invalid</p>
See [[#ICONV/OCONV PATTERNS]]

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "21 JUN 2050"_var.iconv("D/E"); // 30123
// or
let v2 = iconv("21 JUN 2050", "D/E");</code></pre>
</td></tr>
<tr><td>var=</td><td>var.<span class='gendoc_function'>format</span>(fmt_str, args, ...)</td><td>Classic format function in printf style</p>
vars can be formatted either with C++ format codes e.g. {:_>8.2f}</p>
or with exodus oconv codes e.g. {::MD20P|R(_)#8} as in the below example.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(12.345).format("'{:_>8.2f}'"); // "'___12.35'"
let v2 = var(12.345).format("'{::MD20P|R(_)#8}'");
// or
var v3 = format("'{:_>8.2f}'", var(12.345)); // "'___12.35'"
var v4 = format("'{::MD20P|R(_)#8}'", var(12.345));</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>from_codepage</span>(codepage)</td><td>Converts from codepage encoded text to UTF-8 encoded text</p>
e.g. Codepage "CP1124" (Ukrainian).</p>
Use Linux command "iconv -l" for complete list of code pages and encodings.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "\xa4"_var.from_codepage("CP1124"); // "–Ñ"
// or
let v2 = from_codepage("\xa4", "CP1124");
// U+0404 Cyrillic Capital Letter Ukrainian Ie Unicode Character</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>to_codepage</span>(codepage)</td><td>Converts to codepage encoded text from UTF-8 encoded text

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "–Ñ"_var.to_codepage("CP1124").oconv("HEX"); // "A4"
// or
let v2 = to_codepage("–Ñ", "CP1124").oconv("HEX");</code></pre>
</td></tr>
</table>
<h5 id=Dynamic_Array_Functions>Dynamic Array Functions</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>f</span>(fieldno, valueno = 0, subvalueno = 0)</td><td>f() is a highly abbreviated alias for the PICK OS field/value/subvalue extract() function.</p>
"f()" can be thought of as "field" although the function can extract values and subvalues as well.</p>
The convenient PICK OS angle bracket syntax for field extraction (e.g. xxx<20>) is not available in C++.</p>
The abbreviated exodus field extraction function (e.g. xxx.f(20)) is provided instead since field access is extremely heavily used in source code.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "f1^f2v1]f2v2]f2v3^f2"_var;
let v2 = v1.f(2, 2); // "f2v2"</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>extract</span>(fieldno, valueno = 0, subvalueno = 0)</td><td>Extract a specific field, value or subvalue from a dynamic array.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "f1^f2v1]f2v2]f2v3^f2"_var;
let v2 = v1.extract(2, 2); // "f2v2"
//
// For brevity the function alias "f()" (standing for "field") is normally used instead of "extract()" as follows:
var v3 = v1.f(2, 2);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>pickreplace</span>(fieldno, valueno, subvalueno, replacement)</td><td>Same as var.r() function but returns a new string instead of updating a variable in place.<br>Rarely used.</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>pickreplace</span>(fieldno, valueno, replacement)</td><td>Ditto for a specific multivalue</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>pickreplace</span>(fieldno, replacement)</td><td>Ditto for a specific field</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>insert</span>(fieldno, valueno, subvalueno, insertion)</td><td>Same as var.inserter() function but returns a new string instead of updating a variable in place.</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>insert</span>(fieldno, valueno, insertion)</td><td>Ditto for a specific multivalue</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>insert</span>(fieldno, insertion)</td><td>Ditto for a specific field</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>remove</span>(fieldno, valueno = 0, subvalueno = 0)</td><td>Same as var.remover() function but returns a new string instead of updating a variable in place.</p>
"remove" was called "delete" in Pick OS.</td></tr>
</table>
<h5 id=Dynamic_Array_Filters>Dynamic Array Filters</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>sum</span>()</td><td>Sum up multiple values into one higher level

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "1]2]3^4]5]6"_var.sum(); // "6^15"_var
// or
let v2 = sum("1]2]3^4]5]6"_var);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>sumall</span>()</td><td>Sum up all levels into a single figure

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "1]2]3^4]5]6"_var.sumall(); // 21
// or
let v2 = sumall("1]2]3^4]5]6"_var);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>sum</span>(sepchar)</td><td>Ditto allowing commas etc.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "10,20,30"_var.sum(","); // 60
// or
let v2 = sum("10,20,30", ",");</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>mv</span>(opcode, var2)</td><td>Binary ops (+, -, *, /) in parallel on multiple values

<pre><code class='hljs-ncdecl language-javascript'>let v1 = "10]20]30"_var.mv("+","2]3]4"_var); // "12]23]34"_var</code></pre>
</td></tr>
</table>
<h5 id=Dynamic_Array_Mutators_Standalone_Commands>Dynamic Array Mutators Standalone Commands</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>r</span>(fieldno, replacement)</td><td>Replaces a specific field in a dynamic array

<pre><code class='hljs-ncdecl language-javascript'>var v1 = "f1^v1]v2}s2}s3^f3"_var;
v1.r(2, "X"); // "f1^X^f3"_var</code></pre>
</td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>r</span>(fieldno, valueno, replacement)</td><td>Ditto for specific value in a specific field.

<pre><code class='hljs-ncdecl language-javascript'>var v1 = "f1^v1]v2}s2}s3^f3"_var;
v1.r(2, 2, "X"); // "f1^v1]X^f3"_var</code></pre>
</td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>r</span>(fieldno, valueno, subvalueno, replacement)</td><td>Ditto for a specific subvalue in a specific value of a specific field

<pre><code class='hljs-ncdecl language-javascript'>var v1 = "f1^v1]v2}s2}s3^f3"_var;
v1.r(2, 2, 2, "X"); // "f1^v1]v2}X}s3^f3"_var</code></pre>
</td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>inserter</span>(fieldno, insertion)</td><td>Insert a specific field in a dynamic array, moving all other fields up.

<pre><code class='hljs-ncdecl language-javascript'>var v1 = "f1^v1]v2}s2}s3^f3"_var;
v1.inserter(2, "X"); // "f1^X^v1]v2}s2}s3^f3"_var
// or
inserter(v1, 2, "X");</code></pre>
</td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>inserter</span>(fieldno, valueno, insertion)</td><td>Ditto for a specific value in a specific field, moving all other values up.

<pre><code class='hljs-ncdecl language-javascript'>var v1 = "f1^v1]v2}s2}s3^f3"_var;
v1.inserter(2, 2, "X"); // "f1^v1]X]v2}s2}s3^f3"_var
// or
inserter(v1, 2, 2, "X");</code></pre>
</td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>inserter</span>(fieldno, valueno, subvalueno, insertion)</td><td>Ditto for a specific subvalue in a dynamic array, moving all other subvalues up.

<pre><code class='hljs-ncdecl language-javascript'>var v1 = "f1^v1]v2}s2}s3^f3"_var;
v1.inserter(2, 2, 2, "X"); // "f1^v1]v2}X}s2}s3^f3"_var
// or
v1.inserter(2, 2, 2, "X");</code></pre>
</td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>remover</span>(fieldno, valueno = 0, subvalueno = 0)</td><td>Remove a specific field (or value, or subvalue) from a dynamic array, moving all other fields (or values, or subvalues) down.

<pre><code class='hljs-ncdecl language-javascript'>var v1 = "f1^v1]v2}s2}s3^f3"_var;
v1.remover(2, 2); // "f1^v1^f3"_var
// or
remover(v1, 2, 2);</code></pre>
</td></tr>
</table>
<h5 id=Dynamic_Array_Search>Dynamic Array Search</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>locate</span>(target)</td><td>locate() with only the target substr argument provided searches unordered values separated by any of the field mark chars.</p>
<em>Returns:</em> The field, value, subvalue etc. number if found or 0 if not.

<pre><code class='hljs-ncdecl language-javascript'>if ("UK^US^UA"_var.locate("US")) ... ok // 2
// or
if (locate("US", "UK^US^UA"_var)) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>locate</span>(target, out valueno)</td><td>locate() with only the target substr provided and setting returned searches unordered values separated by any type of field mark chars.</p>
<em>Returns:</em> True if found</p>
Setting: Field, value, subvalue etc. number if found or the max number + 1 if not. Suitable for additiom of new values

<pre><code class='hljs-ncdecl language-javascript'>var setting;
if ("UK]US]UA"_var.locate("US", setting)) ... ok // setting -> 2
// or
if (locate("US", "UK]US]UA"_var, setting)) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>locate</span>(target, out setting, fieldno, valueno = 0)</td><td>locate() the target in unordered fields if fieldno is 0, or values if a fieldno is specified, or subvalues if the valueno argument is provided.</p>
<em>Returns:</em> True if found and with the field, value or subvalue number in setting.</p>
<em>Returns:</em> False if not found and with the max field, value or subvalue number found + 1 in setting. Suitable for replacement of new fields, values or subvalues.

<pre><code class='hljs-ncdecl language-javascript'>var setting;
if ("f1^f2v1]f2v2]s1}s2}s3}s4^f3^f4"_var.locate("s4", setting, 2, 3)) ... ok // setting -> 4 // returns true</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>locateby</span>(ordercode, target, out valueno)</td><td>locateby() without fieldno or valueno arguments searches ordered values separated by VM chars.</p>
The order code can be AL, DL, AR, DR meaning Ascending Left, Descending Right, Ascending Right, Ascending Left.</p>
Left is used to indicate alphabetic order where 10 < 2.</p>
Right is used to indicate numeric order where 10 > 2.</p>
Data must be in the correct order for searching to work properly.</p>
<em>Returns:</em> True if found.</p>
In case the target is not exactly found then the correct value no for inserting the target is returned in setting.

<pre><code class='hljs-ncdecl language-javascript'>var valueno; if ("aaa]bbb]ccc"_var.locateby("AL", "bb", valueno)) ... // valueno -> 2 // returns false and valueno = where it could be correctly inserted.</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>locateby</span>(ordercode, target, out setting, fieldno, valueno = 0)</td><td>locateby() ordered as above but in fields if fieldno is 0, or values in a specific fieldno, or subvalues in a specific valueno.

<pre><code class='hljs-ncdecl language-javascript'>var setting;
if ("f1^f2^aaa]bbb]ccc^f4"_var.locateby("AL", "bb", setting, 3)) ... // setting -> 2 // return false and where it could be correctly inserted.</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>locateusing</span>(usingchar, target)</td><td>locate() a target substr in the whole unordered string using a given delimiter char returning true if found.

<pre><code class='hljs-ncdecl language-javascript'>if ("AB,EF,CD"_var.locateusing(",", "EF")) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>locateusing</span>(usingchar, target, out setting, fieldno = 0, valueno = 0, subvalueno = 0)</td><td>locate() the target in a specific field, value or subvalue using a specified delimiter and unordered data</p>
<em>Returns:</em> True If found and returns in setting the number of the delimited field found.</p>
<em>Returns:</em> False if not found and returns in setting the maximum number of delimited fields + 1 if not found.</p>
This is similar to the main locate command but the delimiter char can be specified e.g. a comma or TM etc.

<pre><code class='hljs-ncdecl language-javascript'>var setting;
if ("f1^f2^f3c1,f3c2,f3c3^f4"_var.locateusing(",", "f3c2", setting, 3)) ... ok // setting -> 2 // returns true</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>locatebyusing</span>(ordercode, usingchar, target, out setting, fieldno = 0, valueno = 0, subvalueno = 0)</td><td>locatebyusing() supports all the above features in a single function.</p>
<em>Returns:</em> True if found.</td></tr>
</table>
<h5 id=Database_Access>Database Access</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>connect</span>(conninfo = "")</td><td>For all db operations, the operative var can either be a db connection created with dbconnect() or be any var and a default connection will be established on the fly.</p>
The db connection string (conninfo) parameters are merged from the following places in descending priority.</p>
1. Provided in connect()'s conninfo argument. See 4. for the complete list of parameters.</p>
2. Any environment variables EXO_HOST EXO_PORT EXO_USER EXO_DATA EXO_PASS EXO_TIME</p>
3. Any parameters found in a configuration file at ~/.config/exodus/exodus.cfg</p>
4. The default conninfo is "host=127.0.0.1 port=5432 dbname=exodus user=exodus password=somesillysecret connect_timeout=10"</p>
Setting environment variable EXO_DBTRACE=1 will cause tracing of db interface including SQL commands.

<pre><code class='hljs-ncdecl language-javascript'>let conninfo = "dbname=exodus user=exodus password=somesillysecret";
if (not conn.connect(conninfo)) ...;
// or
if (not connect()) ...
// or
if (not connect("exodus")) ...</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>attach</span>(filenames)</td><td>Attach (connect) specific files by name to specific connections.</p>
It is not necessary to attach files before opening them. Attach is meant to control the defaults.</p>
For the remainder of the session, opening the db file by name without specifying a connection will automatically use the specified connection applies during the attach command.</p>
If conn is not specified then filename will be attached to the default connection.</p>
Multiple file names must be separated by FM

<pre><code class='hljs-ncdecl language-javascript'>let filenames = "definitions^dict.definitions"_var, conn = "exodus";
if (conn.attach(filenames)) ... ok
// or
if (attach(filenames)) ... ok</code></pre>
</td></tr>
<tr><td>cmd</td><td>conn.<span class='gendoc_function'>detach</span>(filenames)</td><td>Detach (disconnect) files that have been attached using attach().</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>begintrans</span>()</td><td>Begin a db transaction.

<pre><code class='hljs-ncdecl language-javascript'>if (not conn.begintrans()) ...
// or
if (not begintrans()) ...</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>statustrans</span>()</td><td>Check if a db transaction is in progress.

<pre><code class='hljs-ncdecl language-javascript'>if (conn.statustrans()) ... ok
// or
if (statustrans()) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>rollbacktrans</span>()</td><td>Rollback a db transaction.

<pre><code class='hljs-ncdecl language-javascript'>if (conn.rollbacktrans()) ... ok
// or
if (rollbacktrans()) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>committrans</span>()</td><td>Commit a db transaction.</p>
<em>Returns:</em> True if successfully committed or if there was no transaction in progress, otherwise false.

<pre><code class='hljs-ncdecl language-javascript'>if (conn.committrans()) ... ok
// or
if (committrans()) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>sqlexec</span>(sqlcmd)</td><td>Execute an sql command.</p>
<em>Returns:</em> True if there was no sql error otherwise lasterror() returns a detailed error message.

<pre><code class='hljs-ncdecl language-javascript'>if (conn.sqlexec("vacuum")) ... ok
// or
if (sqlexec("vacuum")) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>sqlexec</span>(sqlcmd, io response)</td><td>Execute an SQL command and capture the response.</p>
<em>Returns:</em> True if there was no sql error otherwise response contains a detailed error message.</p>
response: Any rows and columns returned are separated by RM and FM respectively. The first row is the column names.</p>
Recommended: Don't use sql directly unless you must to manage or configure a database.

<pre><code class='hljs-ncdecl language-javascript'>let sqlcmd = "select 'xxx' as col1, 'yyy' as col2";
var response;
if (conn.sqlexec(sqlcmd, response)) ... ok // response -> "col1^col2\x1fxxx^yyy"_var /// \x1f is the Record Mark (RM) character. The backtick character is used here by gendoc to deliminate source code.
// or
if (sqlexec(sqlcmd, response)) ... ok</code></pre>
</td></tr>
<tr><td>cmd</td><td>conn.<span class='gendoc_function'>disconnect</span>()</td><td>Closes db connection and frees process resources both locally and in the database server.

<pre><code class='hljs-ncdecl language-javascript'>conn.disconnect();
// or
disconnect();</code></pre>
</td></tr>
<tr><td>cmd</td><td>conn.<span class='gendoc_function'>disconnectall</span>()</td><td>Closes all connections and frees process resources both locally and in the database server(s).</p>
All connections are closed automatically when a process terminates.

<pre><code class='hljs-ncdecl language-javascript'>conn.disconnectall();
// or
disconnectall();</code></pre>
</td></tr>
<tr><td>var=</td><td>conn.<span class='gendoc_function'>lasterror</span>()</td><td><em>Returns:</em> The last os or db error message.

<pre><code class='hljs-ncdecl language-javascript'>var v1 = var().lasterror();
// or
var v2 = lasterror();</code></pre>
</td></tr>
<tr><td>var=</td><td>conn.<span class='gendoc_function'>loglasterror</span>(source = "")</td><td>Log the last os or db error message.</p>
Output: to stdlog</p>
Prefixes the output with source if provided.

<pre><code class='hljs-ncdecl language-javascript'>var().loglasterror("main:");
// or
loglasterror("main:");</code></pre>
</td></tr>
</table>
<h5 id=Database_Management>Database Management</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>dbcreate</span>(new_dbname, old_dbname = "")</td><td>Create a named database on a particular connection.</p>
The target database cannot already exist.</p>
Optionally copies an existing database from the same connection and which cannot have any current connections.

<pre><code class='hljs-ncdecl language-javascript'>var conn = "exodus";
if (not dbdelete("xo_gendoc_testdb")) {}; // Cleanup first
if (conn.dbcreate("xo_gendoc_testdb")) ... ok
// or
if (dbcreate("xo_gendoc_testdb")) ...</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>dbcopy</span>(from_dbname, to_dbname)</td><td>Create a named database as a copy of an existing database.</p>
The target database cannot already exist.</p>
The source database must exist on the same connection and cannot have any current connections.

<pre><code class='hljs-ncdecl language-javascript'>var conn = "exodus";
if (not dbdelete("xo_gendoc_testdb2")) {}; // Cleanup first
if (conn.dbcopy("xo_gendoc_testdb", "xo_gendoc_testdb2")) ... ok
// or
if (dbcopy("xo_gendoc_testdb", "xo_gendoc_testdb2")) ...</code></pre>
</td></tr>
<tr><td>var=</td><td>conn.<span class='gendoc_function'>dblist</span>()</td><td><em>Returns:</em> A list of available databases on a particular connection.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = conn.dblist();
// or
let v2 = dblist();</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>dbdelete</span>(dbname)</td><td>Delete (drop) a named database.</p>
The target database must exist and cannot have any current connections.

<pre><code class='hljs-ncdecl language-javascript'>var conn = "exodus";
if (conn.dbdelete("xo_gendoc_testdb2")) ... ok
// or
if (dbdelete("xo_gendoc_testdb2")) ...</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>createfile</span>(filename)</td><td>Create a named db file.

<pre><code class='hljs-ncdecl language-javascript'>let filename = "xo_gendoc_temp", conn = "exodus";
if (conn.createfile(filename)) ... ok
// or
if (createfile(filename)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>renamefile</span>(filename, newfilename)</td><td>Rename a db file.

<pre><code class='hljs-ncdecl language-javascript'>let conn = "exodus", filename = "xo_gendoc_temp", new_filename = "xo_gendoc_temp2";
if (conn.renamefile(filename, new_filename)) ... ok
// or
if (renamefile(filename, new_filename)) ...</code></pre>
</td></tr>
<tr><td>var=</td><td>conn.<span class='gendoc_function'>listfiles</span>()</td><td><em>Returns:</em> A list of all files in a database

<pre><code class='hljs-ncdecl language-javascript'>var conn = "exodus";
if (not conn.listfiles()) ...
// or
if (not listfiles()) ...</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>clearfile</span>(filename)</td><td>Delete all records in a db file

<pre><code class='hljs-ncdecl language-javascript'>let conn = "exodus", filename = "xo_gendoc_temp2";
if (not conn.clearfile(filename)) ...
// or
if (not clearfile(filename)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>conn.<span class='gendoc_function'>deletefile</span>(filename)</td><td>Delete a db file

<pre><code class='hljs-ncdecl language-javascript'>let conn = "exodus", filename = "xo_gendoc_temp2";
if (conn.deletefile(filename)) ... ok
// or
if (deletefile(filename)) ...</code></pre>
</td></tr>
<tr><td>var=</td><td>conn_or_file.<span class='gendoc_function'>reccount</span>(filename = "")</td><td><em>Returns:</em> The approx. number of records in a db file

<pre><code class='hljs-ncdecl language-javascript'>let conn = "exodus", filename = "xo_clients";
var nrecs1 = conn.reccount(filename);
// or
var nrecs2 = reccount(filename);</code></pre>
</td></tr>
<tr><td>if</td><td>conn_or_file.<span class='gendoc_function'>flushindex</span>(filename = "")</td><td>Calls db maintenance function (vacuum)</p>
This doesnt actually flush any indexes but does make sure that reccount() function is reasonably accurate.</td></tr>
</table>
<h5 id=Database_File_I/O>Database File I/O</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>open</span>(dbfilename, connection = "")</td><td>Opens a db file to a var which can be used in subsequent functions to work on the specified file and database connection.

<pre><code class='hljs-ncdecl language-javascript'>var file, filename = "definitions";
if (not file.open(filename)) ...
// or
if (not open(filename to file)) ...</code></pre>
</td></tr>
<tr><td>cmd</td><td>file.<span class='gendoc_function'>close</span>()</td><td>Closes db file var</p>
Does nothing currently since database file vars consume no resources

<pre><code class='hljs-ncdecl language-javascript'>var file = "definitions";
file.close();
// or
close(file);</code></pre>
</td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>createindex</span>(fieldname, dictfile = "")</td><td>Creates a secondary index for a given db file and field name.</p>
The fieldname must exist in a dictionary file. The default dictionary is "dict." ^ filename.</p>
<em>Returns:</em> False if the index cannot be created for any reason.</p>
* Index already exists</p>
* File does not exist</p>
* The dictionary file does not have a record with a key of the given field name.</p>
* The dictionary file does not exist. Default is "dict." ^ filename.</p>
* The dictionary field defines a calculated field that uses an exodus function. Using a psql function is OK.

<pre><code class='hljs-ncdecl language-javascript'>var filename = "definitions", fieldname = "DATE_TIME";
if (not deleteindex("definitions", "DATE_TIME")) {}; // Cleanup first
if (filename.createindex(fieldname)) ... ok
// or
if (createindex(filename, fieldname)) ...</code></pre>
</td></tr>
<tr><td>var=</td><td>file|conn.<span class='gendoc_function'>listindex</span>(file_or_filename = "", fieldname = "")</td><td>Lists secondary indexes in a database or for a db file</p>
<em>Returns:</em> False if the db file or fieldname are given and do not exist

<pre><code class='hljs-ncdecl language-javascript'>var conn = "exodus";
if (conn.listindex()) ... ok // includes "xo_clients__date_time"
// or
if (listindex()) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>deleteindex</span>(fieldname)</td><td>Deletes a secondary index for a db file and field name.</p>
<em>Returns:</em> False if the index cannot be deleted for any reason</p>
* File does not exist</p>
* Index does not already exists

<pre><code class='hljs-ncdecl language-javascript'>var file = "definitions", fieldname = "DATE_TIME";
if (file.deleteindex(fieldname)) ... ok
// or
if (deleteindex(file, fieldname)) ...</code></pre>
</td></tr>
<tr><td>var=</td><td>file.<span class='gendoc_function'>lock</span>(key)</td><td>Places a metaphorical db lock on a particular record given a db file and key.</p>
This is a advisory lock, not a physical lock, since it makes no restriction on the access or modification of data by other connections.</p>
Neither the db file nor the record key need to actually exist since a lock is just a hash of the db file name and key combined.</p>
If another connection attempts to place an identical lock on the same database it will be denied.</p>
Locks can be removed by unlock() or unlockall() or will be automatically removed at the end of a transaction or when the connection is closed.</p>
If the same process attempts to place an identical lock more than once it may be denied (if not in a transaction) or succeed but be ignored (if in a transaction).</p>
Locks can be used to avoid processing a transaction simultaneously with another connection only to have one of them fail due to mutually updating the same records.</p>
<em>Returns:</em>:</p>
* 0: Failure: Another connection has already placed the same lock.</p>
* "" Failure: The lock has already been placed.</p>
* 1: Success: A new lock has been placed.</p>
* 2: Success: The lock has already been placed and the connection is in a transaction.

<pre><code class='hljs-ncdecl language-javascript'>var file = "xo_clients", key = "1000";
if (file.lock(key)) ... ok
// or
if (lock(file, key)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>unlock</span>(key)</td><td>Removes a db lock placed by the lock function.</p>
Only locks placed on the specified connection can be removed.</p>
Locks cannot be removed while a connection is in a transaction.</p>
<em>Returns:</em> False if the lock is not present in a connection.

<pre><code class='hljs-ncdecl language-javascript'>var file = "xo_clients", key = "1000";
if (file.unlock(key)) ... ok
// or
if (unlock(file, key)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>unlockall</span>()</td><td>Removes all db locks placed by the lock function in the specified connection.</p>
Locks cannot be removed while in a transaction.

<pre><code class='hljs-ncdecl language-javascript'>var conn = "exodus";
if (not conn.unlockall()) ...
// or
if (not unlockall(conn)) ...</code></pre>
</td></tr>
<tr><td>cmd</td><td>rec.<span class='gendoc_function'>write</span>(file, key)</td><td>Writes a record into a db file given a unique primary key.</p>
Either inserts a new record or updates an existing record.</p>
It always succeeds so no result code is returned.</p>
Any memory cached record is deleted.

<pre><code class='hljs-ncdecl language-javascript'>let rec = "Client GD^G^20855^30000^1001.00^20855.76539"_var;
let file = "xo_clients", key = "GD001";
if (not deleterecord("xo_clients", "GD001")) {}; // Cleanup first
rec.write(file, key);
// or
write(rec on file, key);</code></pre>
</td></tr>
<tr><td>if</td><td>rec.<span class='gendoc_function'>read</span>(file, key)</td><td>Reads a record from a db file for a given key.</p>
<em>Returns:</em> False if the key doesnt exist

<pre><code class='hljs-ncdecl language-javascript'>var rec;
let file = "xo_clients", key = "GD001";
if (not rec.read(file, key)) ... // rec -> "Client GD^G^20855^30000^1001.00^20855.76539"_var
// or
if (not read(rec from file, key)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>deleterecord</span>(key)</td><td>Deletes a record from a db file given a key.</p>
<em>Returns:</em> False if the key doesnt exist</p>
Any memory cached record is deleted.

<pre><code class='hljs-ncdecl language-javascript'>let file = "xo_clients", key = "GD001";
if (file.deleterecord(key)) ... ok
// or
if (deleterecord(file, key)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>rec.<span class='gendoc_function'>insertrecord</span>(file, key)</td><td>Inserts a new record in a db file.</p>
<em>Returns:</em> False if the key already exists</p>
Any memory cached record is deleted.

<pre><code class='hljs-ncdecl language-javascript'>let rec = "Client GD^G^20855^30000^1001.00^20855.76539"_var;
let file = "xo_clients", key = "GD001";
if (rec.insertrecord(file, key)) ... ok
// or
if (insertrecord(rec on file, key)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>rec.<span class='gendoc_function'>updaterecord</span>(file, key)</td><td>Updates an existing record in a db file.</p>
<em>Returns:</em> False if the key doesnt already exist</p>
Any memory cached record is deleted.

<pre><code class='hljs-ncdecl language-javascript'>let rec = "Client GD^G^20855^30000^1001.00^20855.76539"_var;
let file = "xo_clients", key = "GD001";
if (not rec.updaterecord(file, key)) ...
// or
if (not updaterecord(rec on file, key)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>readf</span>(file, key, fieldno)</td><td>"Read field" Same as read() but only returns a specific field from the record

<pre><code class='hljs-ncdecl language-javascript'>var field, file = "xo_clients", key = "GD001", fieldno = 2;
if (not field.readf(file, key, fieldno)) ... // field -> "G"
// or
if (not readf(field from file, key, fieldno)) ...</code></pre>
</td></tr>
<tr><td>cmd</td><td>strvar.<span class='gendoc_function'>writef</span>(file, key, fieldno)</td><td>"write field" Same as write() but only writes to a specific field in the record

<pre><code class='hljs-ncdecl language-javascript'>var field = "f3", file = "definitions", key = "1000", fieldno = 3;
field.writef(file, key, fieldno);
// or
writef(field on file, key, fieldno);</code></pre>
</td></tr>
<tr><td>cmd</td><td>rec.<span class='gendoc_function'>writec</span>(file, key)</td><td>"Write cache" Writes a record and key into a memory cached "db file".</p>
The actual file is NOT updated.</p>
writec() either updates an existing cache record if the key already exists or otherwise inserts a new record into the cache.</p>
It always succeeds so no result code is returned.</p>
Neither the db file nor the record key need to actually exist in the actual db.

<pre><code class='hljs-ncdecl language-javascript'>let rec = "Client XD^X^20855^30000^1001.00^20855.76539"_var;
let file = "xo_clients", key = "XD001";
rec.writec(file, key);
// or
writec(rec on file, key);</code></pre>
</td></tr>
<tr><td>if</td><td>rec.<span class='gendoc_function'>readc</span>(file, key)</td><td>"Read cache" Same as "read() but first reads from a memory cache.</p>
1. Tries to read from a memory cache. Returns true if successful.</p>
2a. Tries to read from the actual db file and returns false if unsuccessful.</p>
2b. Writes the record and key to the memory cache and returns true.</p>
Cached db file data lives in exodus process memory and is lost when the process terminates or cleardbcache() is called.

<pre><code class='hljs-ncdecl language-javascript'>var rec;
let file = "xo_clients", key = "XD001";
if (rec.readc(file, key)) ... ok
// or
if (readc(rec from file, key)) ... ok

// Verify not in actual file by using read() not readc()
if (read(rec from file, key)) abort("Error: " ^ key ^ " should not be in the actual file"); // error</code></pre>
</td></tr>
<tr><td>if</td><td>dbfile.<span class='gendoc_function'>deletec</span>(key)</td><td>Deletes a record and key from a memory cached "file".</p>
The actual file is NOT updated.</p>
<em>Returns:</em> False if the key doesnt exist

<pre><code class='hljs-ncdecl language-javascript'>var file = "xo_clients", key = "XD001";
if (file.deletec(key)) ... ok
// or
if (deletec(file, key)) ...</code></pre>
</td></tr>
<tr><td>cmd</td><td>conn.<span class='gendoc_function'>cleardbcache</span>()</td><td>Clears the memory cache of all records for the given connection</p>
All future cache readc() function calls will be forced to obtain records from the actual database and refresh the cache.

<pre><code class='hljs-ncdecl language-javascript'>conn.cleardbcache();
// or
cleardbcache(conn);</code></pre>
</td></tr>
<tr><td>var=</td><td>strvar.<span class='gendoc_function'>xlate</span>(filename, fieldno, mode)</td><td>The xlate ("translate") function is similar to readf() but, when called as an exodus program member function, it can be used efficiently with exodus file dictionaries using column names and functions and multivalued data.</p>
Arguments:</p>
str: Used as the primary key to lookup a field in a given file and field no or field name.</p>
filename: The db file in which to look up data.</p>
If var key is multivalued then a multivalued field is returned.</p>
fieldno: Determines which field of the record is returned.</p>
* Integer returns that field number</p>
* 0 means return the key unchanged.</p>
* "" means return the whole record.</p>
mode: Determines what is returned if the record does not exist for the given key and file.</p>
* "X" returns ""</p>
* "C" returns the key unconverted.

<pre><code class='hljs-ncdecl language-javascript'>let key = "SB001";
let client_name = key.xlate("xo_clients", 1, "X"); // "Client AAA"
// or
let name_and_type = xlate("xo_clients", key, "NAME_AND_TYPE", "X"); // "Client AAA (A)"</code></pre>
</td></tr>
</table>
<h5 id=Database_Sort/Select>Database Sort/Select</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>select</span>(sortselectclause = "")</td><td></td></tr>
<tr><td>cmd</td><td>file.<span class='gendoc_function'>clearselect</span>()</td><td></td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>hasnext</span>()</td><td></td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>readnext</span>(out key)</td><td></td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>readnext</span>(out key, out valueno)</td><td></td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>readnext</span>(out record, out key, out valueno)</td><td></td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>savelist</span>(listname)</td><td></td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>getlist</span>(listname)</td><td></td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>makelist</span>(listname, keys)</td><td></td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>deletelist</span>(listname)</td><td></td></tr>
<tr><td>if</td><td>file.<span class='gendoc_function'>formlist</span>(keys, fieldno = 0)</td><td></td></tr>
</table>
<h5 id=OS_Time/Date>OS Time/Date</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>date</span>()</td><td>Number of whole days since pick epoch 1967-12-31 00:00:00 UTC. Negative for dates before.</p>
e.g. was 20821 from 2025-01-01 00:00:00 UTC for 24 hours

<pre><code class='hljs-ncdecl language-javascript'>let today1 = var().date();
// or
let today2 = date();</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>time</span>()</td><td>Number of whole seconds since last 00:00:00 (UTC).</p>
e.g. 43200 if time is 12:00</p>
Range 0 - 86399 since there are 24*60*60 (86400) seconds in a day.

<pre><code class='hljs-ncdecl language-javascript'>let now1 = var().time();
// or
let now2 = time();</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>ostime</span>()</td><td>Number of fractional seconds since last 00:00:00 (UTC).</p>
A floating point with approx. nanosecond resolution depending on hardware.</p>
e.g. 23343.704387955 approx. 06:29:03 UTC

<pre><code class='hljs-ncdecl language-javascript'>let now1 = var().ostime();
// or
let now2 = ostime();</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>timestamp</span>()</td><td>Number of fractional days since pick epoch 1967-12-31 00:00:00 UTC. Negative for dates before.</p>
A floating point with approx. nanosecond resolution depending on hardware.</p>
e.g. Was 20821.99998842593 around 2025-01-01 23:59:59 UTC

<pre><code class='hljs-ncdecl language-javascript'>let now1 = var().timestamp();
// or
let now2 = timestamp();</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>timestamp</span>(ostime)</td><td>Construct a timestamp from a date and time

<pre><code class='hljs-ncdecl language-javascript'>let idate = iconv("2025-01-01", "D"), itime = iconv("23:59:59", "MT");
let ts1 = idate.timestamp(itime); // 20821.99998842593
// or
let ts2 = timestamp(idate, itime);</code></pre>
</td></tr>
<tr><td>cmd</td><td>var().<span class='gendoc_function'>ossleep</span>(milliseconds)</td><td>Sleep/pause/wait for a number of milliseconds</p>
Releases the processor if not needed for a period of time or a delay is required.

<pre><code class='hljs-ncdecl language-javascript'>var().ossleep(500); // sleep for 500ms
// or
ossleep(500);</code></pre>
</td></tr>
<tr><td>var=</td><td>file_dir_list.<span class='gendoc_function'>oswait</span>(milliseconds)</td><td>Sleep/pause/wait up to a given number of milliseconds or until any changes occur in an FM delimited list of directories and/or files.</p>
Any terminal input (e.g. a key press) will also terminate the wait.</p>
An FM array of event information is returned. See below.</p>
Multiple events are returned in multivalues.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = ".^/etc/hosts"_var.oswait(500); /// e.g. "IN_CLOSE_WRITE^/etc^hosts^f"_var
// or
let v2 = oswait(".^/etc/hosts"_var, 500);</code></pre>

Returned array fields</p>
1. Event type codes</p>
2. dirpaths</p>
3. filenames</p>
4. d=dir, f=file</p>
</p>
Possible event type codes are as follows:</p>
* IN_CLOSE_WRITE - A file opened for writing was closed</p>
* IN_ACCESS - Data was read from file</p>
* IN_MODIFY - Data was written to file</p>
* IN_ATTRIB - File attributes changed</p>
* IN_CLOSE - File was closed (read or write)</p>
* IN_MOVED_FROM - File was moved away from watched directory</p>
* IN_MOVED_TO - File was moved into watched directory</p>
* IN_MOVE - File was moved (in or out of directory)</p>
* IN_CREATE - A file was created in the directory</p>
* IN_DELETE - A file was deleted from the directory</p>
* IN_DELETE_SELF - Directory or file under observation was deleted</p>
* IN_MOVE_SELF - Directory or file under observation was moved</td></tr>
</table>
<h5 id=OS_File_I/O>OS File I/O</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>if</td><td>osfilevar.<span class='gendoc_function'>osopen</span>(osfilename, utf8 = true)</td><td>Given the name of an existing os file name including path, initialises an os file handle var that can be used in random access osbread and osbwrite functions.</p>
The utf8 option defaults to true which causes trimming of partial utf-8 unicode byte sequences from the end of osbreads. For raw untrimmed osbreads pass utf8 = false;</p>
File will be opened for writing if possible otherwise for reading.</p>
<em>Returns:</em> True if successful or false if not possible for any reason.</p>
e.g. Target doesnt exist, permissions etc.

<pre><code class='hljs-ncdecl language-javascript'>let osfilename = ostempdirpath() ^ "xo_gendoc_test.conf";
if (oswrite("" on osfilename)) ... ok /// Create an empty os file
var ostempfile;
if (ostempfile.osopen(osfilename)) ... ok
// or
if (osopen(osfilename to ostempfile)) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>osfilevar.<span class='gendoc_function'>osbwrite</span>(osfilevar, io offset)</td><td>Writes data to an existing os file starting at a given byte offset (0 based).</p>
See osbread for more info.

<pre><code class='hljs-ncdecl language-javascript'>let osfilename = ostempdirpath() ^ "xo_gendoc_test.conf";
let text = "aaa=123\nbbb=456\n";
var offset = osfile(osfilename).f(1); /// Size of file therefore append
if (text.osbwrite(osfilename, offset)) ... ok // offset -> 16
// or
if (not osbwrite(text on osfilename, offset)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>osfilevar.<span class='gendoc_function'>osbread</span>(osfilevar, io offset, length)</td><td>Reads length bytes from an existing os file starting at a given byte offset (0 based).</p>
The osfilevar file handle may either be initialised by osopen or be just be a normal string variable holding the path and name of the os file.</p>
After reading, the offset is updated to point to the correct offset for a subsequent sequential read.</p>
If reading utf8 data (the default) then the length of data actually returned may be a few bytes shorter than requested in order to be a complete number of UTF-8 code points.

<pre><code class='hljs-ncdecl language-javascript'>let osfilename = ostempdirpath() ^ "xo_gendoc_test.conf";
var text, offset = 0;
if (text.osbread(osfilename, offset, 8)) ... ok // text -> "aaa=123\n" // offset -> 8
// or
if (osbread(text from osfilename, offset, 8)) ... ok // text -> "bbb=456\n" // offset -> 16</code></pre>
</td></tr>
<tr><td>cmd</td><td>osfilevar.<span class='gendoc_function'>osclose</span>()</td><td>Removes an osfilevar handle from the internal memory cache of os file handles. This frees up both exodus process memory and operating system resources.</p>
It is advisable to osclose any file handles after use, regardless of whether they were specifically opened using osopen or not, especially in long running programs. Exodus performs caching of internal os file handles per thread and os file. If not closed, then the operating system will probably not flush deleted files from storage until the process is terminated. This can potentially create an memory issue or file system resource issue especially if osopening/osreading/oswriting many perhaps temporary files in a long running process.

<pre><code class='hljs-ncdecl language-javascript'>osfilevar.osclose();
// or
osclose(osfilevar);</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>oswrite</span>(osfilename, codepage = "")</td><td>Create a complete os file from a var.</p>
Any existing os file is removed first.</p>
<em>Returns:</em> True if successful or false if not possible for any reason.</p>
e.g. Path is not writeable, permissions etc.</p>
If codepage is specified then output is converted from utf-8 to that codepage. Otherwise no conversion is done.

<pre><code class='hljs-ncdecl language-javascript'>let text = "aaa = 123\nbbb = 456";
let osfilename = ostempdirpath() ^ "xo_gendoc_test.conf";
if (text.oswrite(osfilename)) ... ok
// or
if (oswrite(text on osfilename)) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>osread</span>(osfilename, codepage = "")</td><td>Read a complete os file into a var.</p>
If codepage is specified then input is converted from that codepage to utf-8 otherwise no conversion is done.</p>
<em>Returns:</em> True if successful or false if not possible for any reason.</p>
e.g. File doesnt exist, permissions etc.

<pre><code class='hljs-ncdecl language-javascript'>var text;
let osfilename = ostempdirpath() ^ "xo_gendoc_test.conf";
if (text.osread(osfilename)) ... ok // text -> "aaa = 123\nbbb = 456"
// or
if (osread(text from osfilename)) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>osfile_or_dirname.<span class='gendoc_function'>osrename</span>(new_dirpath_or_filepath)</td><td>Renames an os file or dir in the OS file system.</p>
Will not overwrite an existing os file or dir.</p>
Source and target must exist in the same storage device.</p>
<em>Returns:</em> True if successful or false if not possible for any reason.</p>
e.g. Target already exists, path is not writeable, permissions etc.</p>
Uses std::filesystem::rename internally.

<pre><code class='hljs-ncdecl language-javascript'>let from_osfilename = ostempdirpath() ^ "xo_gendoc_test.conf";
let to_osfilename = from_osfilename ^ ".bak";
if (not osremove(ostempdirpath() ^ "xo_gendoc_test.conf.bak")) {}; // Cleanup first

if (from_osfilename.osrename(to_osfilename)) ... ok
// or
if (osrename(from_osfilename, to_osfilename)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>osfile_or_dirname.<span class='gendoc_function'>osmove</span>(to_osfilename)</td><td>"Moves" an os file or dir within the os file system.</p>
Will not overwrite an existing os file or dir.</p>
<em>Returns:</em> True if successful or false if not possible for any reason.</p>
e.g. Source doesnt exist or cannot be accessed, target already exists, source or target is not writeable, permissions etc.</p>
Attempts osrename first then oscopy followed by osremove original.

<pre><code class='hljs-ncdecl language-javascript'>let from_osfilename = ostempdirpath() ^ "xo_gendoc_test.conf.bak";
let to_osfilename = from_osfilename.cut(-4);

if (not osremove(ostempdirpath() ^ "xo_gendoc_test.conf")) {}; // Cleanup first
if (from_osfilename.osmove(to_osfilename)) ... ok
// or
if (osmove(from_osfilename, to_osfilename)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>osfile_or_dirname.<span class='gendoc_function'>oscopy</span>(to_osfilename)</td><td>Copies an os file or directory recursively within the os file system.</p>
Will overwrite an existing os file or dir.</p>
Uses std::filesystem::copy internally with recursive and overwrite options

<pre><code class='hljs-ncdecl language-javascript'>let from_osfilename = ostempdirpath() ^ "xo_gendoc_test.conf";
let to_osfilename = from_osfilename ^ ".bak";

if (from_osfilename.oscopy(to_osfilename)) ... ok;
// or
if (oscopy(from_osfilename, to_osfilename)) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>osfilename.<span class='gendoc_function'>osremove</span>()</td><td>Removes/deletes an os file from the OS file system given path and name.</p>
Will not remove directories. Use osrmdir() to remove directories</p>
<em>Returns:</em> True if successful or false if not possible for any reason.</p>
e.g. Target doesnt exist, path is not writeable, permissions etc.

<pre><code class='hljs-ncdecl language-javascript'>let osfilename = ostempdirpath() ^ "xo_gendoc_test.conf";
if (osfilename.osremove()) ... ok
// or
if (osremove(osfilename)) ...</code></pre>
</td></tr>
</table>
<h5 id=OS_Directories>OS Directories</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>var=</td><td>dirpath.<span class='gendoc_function'>oslist</span>(globpattern = "", mode = 0)</td><td><em>Returns:</em> A FM delimited string containing all matching dir entries given a dir path</p>
A glob pattern (e.g. *.conf) can be appended to the path or passed as argument.

<pre><code class='hljs-ncdecl language-javascript'>var entries1 = "/etc/"_var.oslist("*.cfg"); /// e.g. "adduser.conf^ca-certificates.con^... etc."
// or
var entries2 = oslist("/etc/" "*.conf");</code></pre>
</td></tr>
<tr><td>var=</td><td>dirpath.<span class='gendoc_function'>oslistf</span>(globpattern = "")</td><td>Same as oslist for files only</td></tr>
<tr><td>var=</td><td>dirpath.<span class='gendoc_function'>oslistd</span>(globpattern = "")</td><td>Same as oslist for files only</td></tr>
<tr><td>var=</td><td>osfile_or_dirpath.<span class='gendoc_function'>osinfo</span>(mode = 0)</td><td><em>Returns:</em> Dir info for any dir entry or "" if it doesnt exist</p>
A short string containing size ^ FM ^ modified_time ^ FM ^ modified_time</p>
mode 0 default</p>
mode 1 returns "" if not an os file</p>
mode 2 returns "" if not an os dir</p>
See also osfile() and osdir()

<pre><code class='hljs-ncdecl language-javascript'>var info1 = "/etc/hosts"_var.osinfo(); /// e.g. "221^20597^78309"_var
// or
var info2 = osinfo("/etc/hosts");</code></pre>
</td></tr>
<tr><td>var=</td><td>osfilename.<span class='gendoc_function'>osfile</span>()</td><td><em>Returns:</em> Dir info for a os file</p>
A short string containing size ^ FM ^ modified_time ^ FM ^ modified_time</p>
Alias for osinfo(1)

<pre><code class='hljs-ncdecl language-javascript'>var fileinfo1 = "/etc/hosts"_var.osfile(); /// e.g. "221^20597^78309"_var
// or
var fileinfo2 = osfile("/etc/hosts");</code></pre>
</td></tr>
<tr><td>var=</td><td>dirpath.<span class='gendoc_function'>osdir</span>()</td><td><em>Returns:</em> Dir info for a dir.</p>
A short string containing FM ^ modified_time ^ FM ^ modified_time</p>
Alias for osinfo(2)

<pre><code class='hljs-ncdecl language-javascript'>var dirinfo1 = "/etc/"_var.osdir(); /// e.g. "^20848^44464"_var
// or
var dirinfo2 = osfile("/etc/");</code></pre>
</td></tr>
<tr><td>if</td><td>dirpath.<span class='gendoc_function'>osmkdir</span>()</td><td>Makes a new directory and returns true if successful.</p>
Including parent dirs if necessary.

<pre><code class='hljs-ncdecl language-javascript'>let osdirname = "xo_test/aaa";
if (osrmdir("xo_test/aaa")) {}; // Cleanup first
if (osdirname.osmkdir()) ... ok
// or
if (osmkdir(osdirname)) ...</code></pre>
</td></tr>
<tr><td>if</td><td>dirpath.<span class='gendoc_function'>oscwd</span>(newpath)</td><td>Changes the current working dir and returns true if successful.

<pre><code class='hljs-ncdecl language-javascript'>let osdirname = "xo_test/aaa";
if (osdirname.oscwd()) ... ok
// or
if (oscwd(osdirname)) ... ok</code></pre>
</td></tr>
<tr><td>var=</td><td>dirpath.<span class='gendoc_function'>oscwd</span>()</td><td><em>Returns:</em> The current working directory</p>
e.g. "/root/exodus/cli/src/xo_test/aaa"

<pre><code class='hljs-ncdecl language-javascript'>var cwd1 = var().oscwd();
// or
var cwd2 = oscwd();</code></pre>
</td></tr>
<tr><td>if</td><td>dirpath.<span class='gendoc_function'>osrmdir</span>(evenifnotempty = false)</td><td>Removes a os dir and returns true if successful.</p>
Optionally even if not empty. Including subdirs.

<pre><code class='hljs-ncdecl language-javascript'>let osdirname = "xo_test/aaa";
if (oscwd("../..")) ... ok /// Change up before removing because cannot remove dir while it is current
if (osdirname.osrmdir()) ... ok
// or
if (osrmdir(osdirname)) ...</code></pre>
</td></tr>
</table>
<h5 id=OS_Shell/Environment>OS Shell/Environment</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>if</td><td>command.<span class='gendoc_function'>osshell</span>()</td><td>Execute a shell command.</p>
<em>Returns:</em> True if the process terminates with error status 0 and false otherwise.</p>
Append "&>/dev/null" to the command to suppress terminal output.

<pre><code class='hljs-ncdecl language-javascript'>let cmd = "echo $HOME";
if (cmd.osshell()) ... ok
// or
if (osshell(cmd)) ... ok</code></pre>
</td></tr>
<tr><td>if</td><td>instr.<span class='gendoc_function'>osshellread</span>(oscmd)</td><td>Same as osshell but captures and returns stdout</p>
<em>Returns:</em> The stout of the shell command.</p>
Append "2>&1" to the command to capture stderr/stdlog output as well.

<pre><code class='hljs-ncdecl language-javascript'>let cmd = "echo $HOME";
var text;
if (text.osshellread(cmd)) ... ok

// or capturing stdout but ignoring exit status
text = osshellread(cmd);</code></pre>
</td></tr>
<tr><td>if</td><td>outstr.<span class='gendoc_function'>osshellwrite</span>(oscmd)</td><td>Same as osshell but provides stdin to the process</p>
<em>Returns:</em> True if the process terminates with error status 0 and false otherwise.</p>
Append "&> somefile" to the command to suppress and/or capture output.

<pre><code class='hljs-ncdecl language-javascript'>let outtext = "abc xyz";
if (outtext.osshellwrite("grep xyz")) ... ok
// or
if (osshellwrite(outtext, "grep xyz")) ... ok</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>ostempdirpath</span>()</td><td><em>Returns:</em> The path of the tmp dir</p>
e.g. "/tmp/"

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var().ostempdirpath();
// or
let v2 = ostempdirpath();</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>ostempfilename</span>()</td><td><em>Returns:</em> The name of a new temporary file</p>
e.g. Something like "/tmp/~exoEcLj3C"

<pre><code class='hljs-ncdecl language-javascript'>var temposfilename1 = var().ostempfilename();
// or
var temposfilename2 = ostempfilename();</code></pre>
</td></tr>
<tr><td>cmd</td><td>envvalue.<span class='gendoc_function'>ossetenv</span>(envcode)</td><td>Set the value of an environment variable code

<pre><code class='hljs-ncdecl language-javascript'>let envcode = "EXO_ABC", envvalue = "XYZ";
envvalue.ossetenv(envcode);
// or
ossetenv(envcode, envvalue);</code></pre>
</td></tr>
<tr><td>if</td><td>envvalue.<span class='gendoc_function'>osgetenv</span>(envcode)</td><td>Get the value of an environment variable

<pre><code class='hljs-ncdecl language-javascript'>var envvalue1;
if (envvalue1.osgetenv("HOME")) ... ok // e.g. "/home/exodus"
// or
var envvalue2 = osgetenv("EXO_ABC"); // "XYZ"</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>ospid</span>()</td><td>Get the os process id

<pre><code class='hljs-ncdecl language-javascript'>let pid1 = var().ospid(); /// e.g. 663237
// or
let pid2 = ospid();</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>ostid</span>()</td><td>Get the os thread process id

<pre><code class='hljs-ncdecl language-javascript'>let tid1 = var().ostid(); /// e.g. 663237
// or
let tid2 = ostid();</code></pre>
</td></tr>
<tr><td>var=</td><td>var().<span class='gendoc_function'>version</span>()</td><td>Get the libexodus build date and time

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var().version(); /// e.g. "29 JAN 2025 14:56:52"</code></pre>
</td></tr>
<tr><td>if</td><td>strvar.<span class='gendoc_function'>setxlocale</span>()</td><td>Sets the current thread's default locale codepage code</p>
True if successful

<pre><code class='hljs-ncdecl language-javascript'>if ("en_US.utf8"_var.setxlocale()) ... ok
// or
if (setxlocale("en_US.utf8")) ... ok</code></pre>
</td></tr>
<tr><td>var=</td><td>var.<span class='gendoc_function'>getxlocale</span>()</td><td><em>Returns:</em> The current thread's default locale codepage code

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var().getxlocale(); // "en_US.utf8"
// or
let v2 = getxlocale();</code></pre>
</td></tr>
</table>
<h5 id=Output>Output</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>expr</td><td>varstr.<span class='gendoc_function'>outputl</span>(prefix = "")</td><td>Output to stdout with optional prefix.</p>
Appends an NL char.</p>
Is FLUSHED, not buffered.</p>
The raw string bytes are output. No character or byte conversion is performed.

<pre><code class='hljs-ncdecl language-javascript'>"abc"_var.outputl("xyz = "); /// Sends "xyz = abc\n" to stdout and flushes.
// or
outputl("xyz = ", "abc"); /// Any number of arguments is allowed. All will be output.</code></pre>
</td></tr>
<tr><td>expr</td><td>varstr.<span class='gendoc_function'>output</span>(prefix = "")</td><td>Same as outputl() but doesnt append an NL char and is BUFFERED, not flushed.</td></tr>
<tr><td>expr</td><td>varstr.<span class='gendoc_function'>outputt</span>(prefix = "")</td><td>Same as outputl() but appends a tab char instead of an NL char and is BUFFERED, not flushed.</td></tr>
<tr><td>expr</td><td>varstr.<span class='gendoc_function'>logputl</span>(prefix = "")</td><td>Output to stdlog with optional prefix.</p>
Appends an NL char.</p>
Is BUFFERED not flushed.</p>
Any of the six types of field mark characters present are converted to their visible versions,

<pre><code class='hljs-ncdecl language-javascript'>"abc"_var.logputl("xyz = "); /// Sends "xyz = abc\n" to stdlog buffer and is not flushed.
// or
logputl("xyz = ", "abc");; /// Any number of arguments is allowed. All will be output.</code></pre>
</td></tr>
<tr><td>expr</td><td>varstr.<span class='gendoc_function'>logput</span>(prefix = "")</td><td>Same as logputl() but doesnt append an NL char.</td></tr>
<tr><td>expr</td><td>varstr.<span class='gendoc_function'>errputl</span>(prefix = "")</td><td>Output to stderr with optional prefix.</p>
Appends an NL char.</p>
Is FLUSHED not buffered.</p>
Any of the six types of field mark characters present are converted to their visible versions,

<pre><code class='hljs-ncdecl language-javascript'>"abc"_var.errputl("xyz = "); /// Sends "xyz = abc\n" to stderr
// or
errputl("xyz = ", "abc"); /// Any number of arguments is allowed. All will be output.</code></pre>
</td></tr>
<tr><td>expr</td><td>varstr.<span class='gendoc_function'>errput</span>(prefix = "")</td><td>Same as errputl() but doesnt append an NL char and is BUFFERED not flushed.</td></tr>
<tr><td>expr</td><td>varstr.<span class='gendoc_function'>put</span>(std::ostream& ostream1)</td><td>Output to a given stream.</p>
Is BUFFERED not flushed.</p>
The raw string bytes are output. No character or byte conversion is performed.</td></tr>
<tr><td>cmd</td><td>var().<span class='gendoc_function'>osflush</span>()</td><td>Flush any and all buffered output to stdout/stdlog

<pre><code class='hljs-ncdecl language-javascript'>var().osflush();
// or
osflush();</code></pre>
</td></tr>
</table>
<h5 id=Input>Input</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>expr</td><td>var.<span class='gendoc_function'>input</span>()</td><td>Wait for stdin until cr or eof</td></tr>
<tr><td>expr</td><td>var.<span class='gendoc_function'>input</span>(prompt)</td><td>Ditto after outputting prompt to stdout</td></tr>
<tr><td>expr</td><td>var.<span class='gendoc_function'>inputn</span>(nchars)</td><td>Wait for nbytes from stdin</td></tr>
<tr><td>if</td><td>var().<span class='gendoc_function'>isterminal</span>()</td><td>True if terminal is available</td></tr>
<tr><td>if</td><td>var().<span class='gendoc_function'>hasinput</span>(milliseconds = 0)</td><td>True if stdin bytes available within milliseconds</td></tr>
<tr><td>if</td><td>var().<span class='gendoc_function'>eof</span>()</td><td>True if stdin is at end of file</td></tr>
<tr><td>if</td><td>var().<span class='gendoc_function'>echo</span>(on_off)</td><td>Reflect all stdin to stdout if terminal available</td></tr>
<tr><td>cmd</td><td>var().<span class='gendoc_function'>breakon</span>()</td><td>Allow interrupt Ctrl+C</td></tr>
<tr><td>cmd</td><td>var().<span class='gendoc_function'>breakoff</span>()</td><td>Prevent interrupt Ctr+C</td></tr>
</table>
<h5 id=Math/Boolean>Math/Boolean</h5>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>abs</span>()</td><td>Absolute value

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(-12.34).abs(); // 12.34
// or
let v2 = abs(-12.34);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>pwr</span>(exponent)</td><td>Power

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(2).pwr(8); // 256
// or
let v2 = pwr(2, 8);</code></pre>
</td></tr>
<tr><td>cmd</td><td>varnum.<span class='gendoc_function'>initrnd</span>()</td><td>Initialise the seed for rnd()</p>
Allows the stream of pseudo random numbers generated by rnd() to be reproduced.</p>
Seeded from std::chrono::high_resolution_clock::now() if the argument is 0;

<pre><code class='hljs-ncdecl language-javascript'>var(123).initrnd(); /// Set seed to 123
// or
initrnd(123);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>rnd</span>()</td><td>Pseudo random number generator</p>
<em>Returns:</em> a pseudo random integer between 0 and the provided maximum minus 1.</p>
Uses std::mt19937 and std::uniform_int_distribution<int>

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(100).rnd(); /// Random 0 to 99
// or
let v2 = rnd(100);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>exp</span>()</td><td>Power of e

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(1).exp(); // 2.718281828459045
// or
let v2 = exp(1);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>sqrt</span>()</td><td>Square root

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(100).sqrt(); // 10
// or
let v2 = sqrt(100);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>sin</span>()</td><td>Sine of degrees

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(30).sin(); // 0.5
// or
let v2 = sin(30);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>cos</span>()</td><td>Cosine of degrees

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(60).cos(); // 0.5
// or
let v2 = cos(60);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>tan</span>()</td><td>Tangent of degrees

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(45).tan(); // 1
// or
let v2 = tan(45);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>atan</span>()</td><td>Arctangent of degrees

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(1).atan(); // 45
// or
let v2 = atan(1);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>loge</span>()</td><td>Natural logarithm</p>
<em>Returns:</em> Floating point ver (double)

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(2.718281828459045).loge(); // 1
// or
let v2 = loge(2.718281828459045);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>integer</span>()</td><td>Truncate decimal numbers towards zero</p>
<em>Returns:</em> An integer var

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(2.9).integer(); // 2
// or
let v2 = integer(2.9);

var v3 = var(-2.9).integer(); // -2
// or
var v4 = integer(-2.9);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>floor</span>()</td><td>Truncate decimal numbers towards negative</p>
<em>Returns:</em> An integer var

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(2.9).floor(); // 2
// or
let v2 = floor(2.9);

var v3 = var(-2.9).floor(); // -3
// or
var v4 = floor(-2.9);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>mod</span>(modulus)</td><td>Modulus function</p>
Identical to C++ % operator only for positive numbers and modulus</p>
Negative denominators are considered as periodic with positiive numbers</p>
Result is between [0, modulus) if modulus is positive</p>
Result is between (modulus, 0] if modulus is negative (symmetric)</p>
Throws: VarDivideByZero if modulus is zero.</p>
Floating point works.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = var(11).mod(5); // 1
// or
let v2 = mod(11, 5); // 1
let v3 = mod(-11, 5); // 4
let v4 = mod(11, -5); // -4
let v5 = mod(-11, -5); // -1</code></pre>
</td></tr>
</table>
<h3 id=I/O_Conversion_Codes_>I/O Conversion Codes </h3>

<table class=wikitable>
<tr> <th>Usage</th> <th>Function</th> <th>Description</th> </tr>
<tr><td>var=</td><td>vardate.<span class='gendoc_function'>oconv_D</span>(conversion)</td><td>Date output: Convert internal date format to human readable date or calendar info in text format.</p>
<em>Returns:</em> Human readable date or calendar info, or the original value unconverted if non-numeric.</p>
Flags: See examples below.</p>
Any multifield/multivalue structure is preserved.

<pre><code class='hljs-ncdecl language-javascript'>let v1 = 12345;
assert( v1.oconv( "D"‚ãÖ‚ãÖ‚ãÖ) == "18 OCT 2001"‚ãÖ‚ãÖ); // Default
assert( v1.oconv( "D/"‚ãÖ‚ãÖ) == "10/18/2001"‚ãÖ‚ãÖ‚ãÖ); // / separator
assert( v1.oconv( "D-"‚ãÖ‚ãÖ) == "10-18-2001"‚ãÖ‚ãÖ‚ãÖ); // - separator
assert( v1.oconv( "D2"‚ãÖ‚ãÖ) == "18 OCT 01"‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // 2 digit year
assert( v1.oconv( "D/E"‚ãÖ) == "18/10/2001"‚ãÖ‚ãÖ‚ãÖ); // International order with /
assert( v1.oconv( "DS"‚ãÖ‚ãÖ) == "2001 OCT 18"‚ãÖ‚ãÖ); // ISO Year first
assert( v1.oconv( "DS-"‚ãÖ) == "2001-10-18"‚ãÖ‚ãÖ‚ãÖ); // ISO Year first with -
assert( v1.oconv( "DM"‚ãÖ‚ãÖ) == "10"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Month number
assert( v1.oconv( "DMA"‚ãÖ) == "OCTOBER"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Month name
assert( v1.oconv( "DY"‚ãÖ‚ãÖ) == "2001"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Year number
assert( v1.oconv( "DY2"‚ãÖ) == "01"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Year 2 digits
assert( v1.oconv( "DD"‚ãÖ‚ãÖ) == "18"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Day number in month (1-31)
assert( v1.oconv( "DW"‚ãÖ‚ãÖ) == "4"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Weekday number (1-7)
assert( v1.oconv( "DWA"‚ãÖ) == "THURSDAY"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Weekday name
assert( v1.oconv( "DQ"‚ãÖ‚ãÖ) == "4"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Quarter number
assert( v1.oconv( "DJ"‚ãÖ‚ãÖ) == "291"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Day number in year
assert( v1.oconv( "DL"‚ãÖ‚ãÖ) == "31"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Last day number of month (28-31)

// Multifield/multivalue
var v2 = "12345^12346]12347"_var;
assert(v2.oconv("D") == "18 OCT 2001^19 OCT 2001]20 OCT 2001"_var);

// or
assert( oconv(v1, "D"‚ãÖ‚ãÖ‚ãÖ) == "18 OCT 2001"‚ãÖ‚ãÖ);</code></pre>
</td></tr>
<tr><td>var=</td><td>varstr.<span class='gendoc_function'>iconv_D</span>(conversion)</td><td>Date input: Convert human readable date to internal date format.</p>
<em>Returns:</em> Internal date or "" if the input is an invalid date.</p>
Internal date format is whole days since 1967-12-31 00:00:00 which is day 0.</p>
Any multifield/multivalue structure is preserved.

<pre><code class='hljs-ncdecl language-javascript'>// International order "DE"
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖoconv(19005, "DE") == "12 JAN 2020");
assert(‚ãÖ‚ãÖ‚ãÖ"12/1/2020"_var.iconv("DE") == 19005);
assert(‚ãÖ‚ãÖ‚ãÖ"12 1 2020"_var.iconv("DE") == 19005);
assert(‚ãÖ‚ãÖ‚ãÖ"12-1-2020"_var.iconv("DE") == 19005);
assert(‚ãÖ"12 JAN 2020"_var.iconv("DE") == 19005);
assert(‚ãÖ"jan 12 2020"_var.iconv("DE") == 19005);

// American order "D"
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖoconv(19329, "D") == "01 DEC 2020");
assert(‚ãÖ‚ãÖ‚ãÖ"12/1/2020"_var.iconv("D") == 19329);
assert(‚ãÖ‚ãÖ"DEC 1 2020"_var.iconv("D") == 19329);
assert(‚ãÖ‚ãÖ"1 dec 2020"_var.iconv("D") == 19329);

// Reverse order
assert(‚ãÖ‚ãÖ"2020/12/1"_var.iconv("DE") == 19329);
assert(‚ãÖ‚ãÖ‚ãÖ"2020-12-1"_var.iconv("D") == 19329);
assert(‚ãÖ‚ãÖ"2020 1 dec"_var.iconv("D") == 19329);

//Invalid date
assert(‚ãÖ‚ãÖ‚ãÖ"2/29/2021"_var.iconv("D") == "");
assert(‚ãÖ‚ãÖ"29/2/2021"_var.iconv("DE") == "");

// or
assert(iconv("12/1/2020"_var, "DE") == 19005);</code></pre>
</td></tr>
<tr><td>var=</td><td>vartime.<span class='gendoc_function'>oconv_MT</span>(conversion)</td><td>Time output: Convert internal time format to human readable time e.g. "10:30:59".</p>
<em>Returns:</em> Human readable time or the original value unconverted if non-numeric.</p>
Conversion code (e.g. "MTHS") is "MT" + flags ...</p>
Flags:</p>
"H" - Show AM/PM otherwise 24 hour clock is used.</p>
"S" - Output seconds</p>
"2" = Ignored (used in iconv)</p>
":" - Any other flag is used as the separator character instead of ":"</p>
Any multifield/multivalue structure is preserved.

<pre><code class='hljs-ncdecl language-javascript'>var v1 = 234800;
assert( v1.oconv( "MT"‚ãÖ‚ãÖ‚ãÖ) == "17:13"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ);
assert( v1.oconv( "MTH"‚ãÖ‚ãÖ) == "05:13PM"‚ãÖ‚ãÖ‚ãÖ‚ãÖ);
assert( v1.oconv( "MTS"‚ãÖ‚ãÖ) == "17:13:20"‚ãÖ‚ãÖ‚ãÖ);
assert( v1.oconv( "MTHS"‚ãÖ) == "05:13:20PM"‚ãÖ);

var v2 = 0;
assert( v2.oconv( "MT"‚ãÖ‚ãÖ‚ãÖ) == "00:00"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ);
assert( v2.oconv( "MTH"‚ãÖ‚ãÖ) == "12:00AM"‚ãÖ‚ãÖ‚ãÖ‚ãÖ);
assert( v2.oconv( "MTS"‚ãÖ‚ãÖ) == "00:00:00"‚ãÖ‚ãÖ‚ãÖ);
assert( v2.oconv( "MTHS"‚ãÖ) == "12:00:00AM"‚ãÖ);

// Multifield/multivalue
var v3 = "234800^234860]234920"_var;
assert(v3.oconv("MT") == "17:13^17:14]17:15"_var);

// or
assert( oconv(v1, "MT"‚ãÖ‚ãÖ‚ãÖ) == "17:13"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ);</code></pre>
</td></tr>
<tr><td>var=</td><td>varstr.<span class='gendoc_function'>iconv_MT</span>(strict)</td><td>Time input: Convert human readable time (e.g. "10:30:59") to internal time format.</p>
<em>Returns:</em> Internal time or "" if the input is an invalid time.</p>
Internal time format is whole seconds since midnight.</p>
Accepts: Two or three groups of digits surrounded and separated by any non-digits character(s).</p>
Any multifield/multivalue structure is preserved.

<pre><code class='hljs-ncdecl language-javascript'>assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"17:13"_var.iconv( "MT" ) == 61980);
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ"05:13PM"_var.iconv( "MT" ) == 61980);
assert(‚ãÖ‚ãÖ‚ãÖ"17:13:20"_var.iconv( "MT" ) == 62000);
assert(‚ãÖ"05:13:20PM"_var.iconv( "MT" ) == 62000);

assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"00:00"_var.iconv( "MT" ) == 0);
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ"12:00AM"_var.iconv( "MT" ) == 0);‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ// Midnight
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ"12:00PM"_var.iconv( "MT" ) == 43200);‚ãÖ// Noon
assert(‚ãÖ‚ãÖ‚ãÖ"00:00:00"_var.iconv( "MT" ) == 0);
assert(‚ãÖ"12:00:00AM"_var.iconv( "MT" ) == 0);

// Multifield/multivalue
assert("17:13^05:13PM]17:13:20"_var.iconv("MT") == "61980^61980]62000"_var);

// or
assert(iconv("17:13", "MT") == 61980);</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>oconv_MD</span>(conversion)</td><td>Number output: Convert internal numbers to external text format after rounding and optional scaling.</p>
<em>Returns:</em> A string or, if the value is not numeric, then no conversion is performed and the original value is returned.</p>
Conversion code (e.g. "MD20") is "MD" or "MC", 1st digit, 2nd digit, flags ...</p>
</p>
MD outputs like 123.45 (International)</p>
MC outputs like 123,45 (European)</p>
</p>
1st digit = Decimal places to display. Also decimal places to move if 2nd digit not present and no P flag present.</p>
2nd digit = Optional decimal places to move left if P flag not present.</p>
</p>
Flags:</p>
"P" - Preserve decimal places. Same as 2nd digit = 0;</p>
"Z" - Zero flag - return "" if zero.</p>
"X" - No conversion - return as is.</p>
"." or "," - Separate thousands depending on MD or MC.</p>
"-" means suffix negatives with "-" and positives with " " (space).</p>
"<" means wrap negatives in "<" and ">" characters.</p>
"C" means suffix negatives with "CR" and positives or zero with "DB".</p>
"D" means suffix negatives with "DB" and positives or zero with "CR".</p>
</p>
Any multifield/multivalue structure is preserved.

<pre><code class='hljs-ncdecl language-javascript'>var v1 = -1234.567;
assert( v1.oconv( "MD20"‚ãÖ‚ãÖ‚ãÖ) ==‚ãÖ‚ãÖ"-1234.57"‚ãÖ‚ãÖ‚ãÖ);
assert( v1.oconv( "MD20,"‚ãÖ‚ãÖ) ==‚ãÖ"-1,234.57"‚ãÖ‚ãÖ‚ãÖ); // , flag
assert( v1.oconv( "MC20,"‚ãÖ‚ãÖ) ==‚ãÖ"-1.234,57"‚ãÖ‚ãÖ‚ãÖ); // MC code
assert( v1.oconv( "MD20,-"‚ãÖ) ==‚ãÖ‚ãÖ"1,234.57-"‚ãÖ‚ãÖ); // - flag
assert( v1.oconv( "MD20,<"‚ãÖ) ==‚ãÖ"<1,234.57>"‚ãÖ‚ãÖ); // < flag
assert( v1.oconv( "MD20,C"‚ãÖ) ==‚ãÖ‚ãÖ"1,234.57CR"‚ãÖ); // C flag
assert( v1.oconv( "MD20,D"‚ãÖ) ==‚ãÖ‚ãÖ"1,234.57DB"‚ãÖ); // D flag

// Multifield/multivalue
var v2 = "1.1^2.1]2.2"_var;
assert( v2.oconv( "MD20"‚ãÖ‚ãÖ‚ãÖ) == "1.10^2.10]2.20"_var);

// or
assert( oconv(v1, "MD20"‚ãÖ‚ãÖ‚ãÖ) ==‚ãÖ‚ãÖ"-1234.57"‚ãÖ‚ãÖ‚ãÖ);</code></pre>
</td></tr>
<tr><td>var=</td><td>var.<span class='gendoc_function'>oconv_LRC</span>(format)</td><td>Text justification: Left, right and center. Padding and truncating. See Procrustes.</p>
e.g. "L#10", "R#10", "C#10"</p>
Useful when outputting to terminal devices where spaces are used for alignment.</p>
Multifield/multivalue structure is preserved.</p>
ASCII only.

<pre><code class='hljs-ncdecl language-javascript'>assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"abcde"_var.oconv(‚ãÖ"L#3"‚ãÖ) == "abc"‚ãÖ); // Truncating
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"abcde"_var.oconv(‚ãÖ"R#3"‚ãÖ) == "cde"‚ãÖ);
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"abcde"_var.oconv(‚ãÖ"C#3"‚ãÖ) == "abc"‚ãÖ);

assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"ab"_var.oconv(‚ãÖ"L#6"‚ãÖ) == "ab‚ê£‚ê£‚ê£‚ê£"‚ãÖ); // Padding
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"ab"_var.oconv(‚ãÖ"R#6"‚ãÖ) == "‚ê£‚ê£‚ê£‚ê£ab"‚ãÖ);
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"ab"_var.oconv(‚ãÖ"C#6"‚ãÖ) == "‚ê£‚ê£ab‚ê£‚ê£"‚ãÖ);

assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖvar(42).oconv(‚ãÖ"L(0)#5"‚ãÖ) == "42000"‚ãÖ); // Padding character (x)
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖvar(42).oconv(‚ãÖ"R(0)#5"‚ãÖ) == "00042"‚ãÖ);
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖvar(42).oconv(‚ãÖ"C(0)#5"‚ãÖ) == "04200"‚ãÖ);
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖvar(42).oconv(‚ãÖ"C(0)#5"‚ãÖ) == "04200"‚ãÖ);

// Multifield/multivalue
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"f1^v1]v2"_var.oconv("L(_)#5") == "f1___^v1___]v2___"_var);

// Fail for non-ASCII (Should be 5)
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"üê±"_var.oconv("L#5").textwidth() == 3);

// or
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖoconv("abcd", "L#3"‚ãÖ) == "abc"‚ãÖ);</code></pre>
</td></tr>
<tr><td>var=</td><td>varstr.<span class='gendoc_function'>oconv_T</span>(format)</td><td>Text folding and justification.</p>
e.g. T#20</p>
Useful when outputting to terminal devices where spaces are used for alignment.</p>
Splits text into multiple fixed length lines by inserting spaces and TM characters.</p>
ASCII only.

<pre><code class='hljs-ncdecl language-javascript'>var v1 = "Have a nice day";
assert( v1.oconv("T#10") == "Have a‚ê£‚ê£‚ê£‚ê£|nice day‚ê£‚ê£"_var);
// or
assert( oconv(v1, "T#10"‚ãÖ) == "Have a‚ê£‚ê£‚ê£‚ê£|nice day‚ê£‚ê£"_var‚ãÖ);</code></pre>
</td></tr>
<tr><td>var=</td><td>varstr.<span class='gendoc_function'>oconv_HEX</span>(ioratio)</td><td>Convert string to hexadecimal.</p>
Multifield/multivalue structure is not preserved. Field marks are converted to HEX as for all other bytes.

<pre><code class='hljs-ncdecl language-javascript'>assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"ab01"_var.oconv(‚ãÖ"HEX"‚ãÖ) == "61" "62" "30" "31"‚ãÖ);
assert(‚ãÖ"\xff\x00"_var.oconv(‚ãÖ"HEX"‚ãÖ) == "FF" "00"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Any bytes are ok.
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖvar(10).oconv(‚ãÖ"HEX"‚ãÖ) == "31" "30"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Uses ASCII string equivalent of 10 i.e. "10".
assert(‚ãÖ‚ãÖ‚ãÖ"\u0393"_var.oconv(‚ãÖ"HEX"‚ãÖ) == "CE" "93"‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ); // Greek capital Gamma in utf8 bytes.
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ"a^]b"_var.oconv(‚ãÖ"HEX"‚ãÖ) == "61" "1E" "1D" "62"‚ãÖ); // Field and value marks.
// or
assert(‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖ‚ãÖoconv("ab01"_var, "HEX") == "61" "62" "30" "31");</code></pre>
</td></tr>
<tr><td>var=</td><td>varstr.<span class='gendoc_function'>iconv_HEX</span>(ioratio)</td><td>Convert hexadecimal to string.</p>
Reverse of oconv("HEX") above.</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>oconv_MX</span>()</td><td>Numeric hex format: Convert number to hexadecimal string</p>
If the value is not numeric then no conversion is performed and the original value is returned.

<pre><code class='hljs-ncdecl language-javascript'>assert( var("255").oconv("MX") == "FF");
// or
assert( oconv(var("255"), "MX") == "FF");</code></pre>
</td></tr>
<tr><td>var=</td><td>varnum.<span class='gendoc_function'>oconv_MB</span>()</td><td>Numeric binary format: Convert number to strings of 1s and 0s</p>
If the value is not numeric then no conversion is performed and the original value is returned.

<pre><code class='hljs-ncdecl language-javascript'>assert( var(255).oconv("MB") == 1111'1111);
// or
assert( oconv(var(255), "MB") == 1111'1111);</code></pre>
</td></tr>
<tr><td>var=</td><td>varstr.<span class='gendoc_function'>oconv_TX</span>(conversion)</td><td>Convert dynamic arrays to standard text format.</p>
Useful for using text editors on dynamic arrays.</p>
FMs -> NL after escaping any embedded NL

<pre><code class='hljs-ncdecl language-javascript'> // backslash in text remains backslash
assert(var(_BS).oconv("TX") == _BS);

// 1. Double escape any _BS "n" -> _BS _BS "n"
assert(var(_BS "n").oconv("TX") == _BS _BS "n");

// 2. Single escape any _NL -> _BS "n"
assert(var(_NL).oconv("TX") == _BS "n");

// 3. FMs -> _NL (‚èé)
assert("üåç^üåç"_var.oconv("TX") == "üåç" _NL "üåç");

// 4. VMs -> _BS _NL (\‚èé)
assert("üåç]üåç"_var.oconv("TX") == "üåç" _BS _NL "üåç");

// 5. SMs -> _BS _BS _NL (\\‚èé)
assert("üåç}üåç"_var.oconv("TX") == "üåç" _BS _BS _NL "üåç");

// 6. TMs -> _BS _BS _BS _NL (\\\‚èé)
assert("üåç|üåç"_var.oconv("TX") == "üåç" _BS _BS _BS _NL "üåç");

// 7. STs -> _BS _BS _BS _BS _NL (\\\\‚èé)
assert("üåç~üåç"_var.oconv("TX") == "üåç" _BS _BS _BS _BS _NL "üåç");</code></pre>
</td></tr>
<tr><td>var=</td><td>varstr.<span class='gendoc_function'>iconv_TX</span>(conversion)</td><td>Convert standard text format to dynamic array.</p>
Reverse of oconv("TX") above.</td></tr>
</table>

