#!/bin/bash

	if [ -z $1 ]; then
		$0 fold | fold -s
		exit
	fi

	printf "# Generated by exodus keywords.sh\n"
	for CLASS in 'var|exo' dim ExoProgram FlowControl; do
		echo
		printf "'${CLASS/|exo/}', '_${CLASS/|exo/}', "
		for word in `\grep -P "($CLASS)::[\w]+" *.cppm *.cpp -o|cut -d: -f4|sort|uniq`; do
			printf "'$word', "
		done
		echo
	done

# Add to devwiki LocalSettings.php

#// Use the systems pygmentize which we have customised to highlight exodus keywords
#//
#// Add ./exodus_keywords.txt to
#//
#// nano /usr/lib/python3/dist-packages/pygments/lexers/c_cpp.py
#//
#// Insert after:
#//           'keywords': [
#// This:
#//             (words((
#//              ... paste exodus_keywords here
#//             ), suffix=r'\b'), Keyword.Reserved),
#//
#// This is probably insignificant.
#// rm /usr/lib/python3/dist-packages/pygments/lexers/__pycache__/c_cpp.cpython-312.pyc
#// Not required, but can be recreated by:
#// python3 -c "from pygments.lexers import get_lexer_by_name; get_lexer_by_name('cpp')"
#//
#// MUST touch LocalSettings.php to trigger refresh of cache after updating c_cpp.py
#$wgPygmentizePath = '/usr/bin/pygmentize';
#
