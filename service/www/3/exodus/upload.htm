<!DOCTYPE html>
<html lang="en">
<head>
	<script type="text/javascript" src="scripts/client.js"></script>
	<script type="text/javascript" src="scripts/db.js"></script>
	<script type="text/javascript" src="scripts/upload.js"></script>

	<script>
		// Prevent default browser behaviour of opening a file when dropped anywhere on page
		document.addEventListener("dragover", function(event) {
			event.preventDefault()
		})
		document.addEventListener("drop", function(event) {
			event.preventDefault()
		})
	</script>

	<title>Images, Audio, Video, Documents</title>

	<style>
		td {
			padding: 10px;
		}

		#dropbox {
			background-color: #f9f9f9;
			padding: 20px;
			min-width: 500px;
			height: 200px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 12px;
			cursor: copy;
			border: 2px dashed lightgrey;
			box-sizing: border-box;
			border-radius: 6px;
			text-align: center;
			overflow: hidden;
		}

		#dropbox:hover {
			border-color: #777 !important;
		}

		#dropbox.dragover {
			border-color: #777;
			cursor: copy;
		}

		#dropbox.valid {
			border-color: #339933;
		}

		#dropbox.invalid {
			border-color: #f05c62;
		}

		#dropbox.invalid.dragover, #dropbox.valid.dragover {
			border-color: #777 !important;
		}
	</style>

</head>

<body>
	<div align="center">

		<h2>
			Upload Image, Audio, Video, Documents
		</h2>
		<button class="exodusbutton" style="display: none" id="button_showupload">
			Upload
		</button>

		<form enctype="multipart/form-data" target="_parent" action="../exodus/upload.php" method="post" id="form1">

			<table class="exodusform" id="table_upload" style="padding: 5px; display: none">

				<tr>
					<td rowspan="2" style="text-align:center; vertical-align:middle; padding:30px;">
						<img src="../../exodus/images/theme2/uploadfile.webp" style="height:40px; width:40px" />
						<br><b>Upload file</b>
					</td>
					<td colspan="2">
						<!--Hidden old browse button-->
						<input id="filedata" name="filedata" type="file" onchange="previewimage_sync(this)" style="display:none;" />

						<div id="dropbox" onclick="document.getElementById('filedata').click()" ondragover="highlight_dropbox(event)" ondragleave="unhighlight_dropbox()" ondrop="upload_ondrop(event)">
							<span style="color: #999; font-family: monospace; font-size: 12px; font-style: italic;">Click to browse for a file<br>Or drag & drop it here<br><br><br></span>
						</div>
						<span style="font-family: monospace; font-size: 10px; color: #555; margin-top: 5px; display: block;">
							Supported file formats: <br>
							<span style="font-family: monospace; font-size: 10px; color: #555;" id="audiovisualextensionselement"></span>
						</span>
					</td>
				</tr>

				<tr>
					<td style="text-align:center; vertical-align:middle; padding:10px;">
						<input id="button_submit" class="exodusbutton" type="button" value="Upload" accesskey="2" title="Upload (Alt+2)" />
						<button class="exodusbutton" onclick="window.close()" title="Close window (Esc)">Close</button>
					</td>
					<span style="margin-left: 2.5px; display:none;" id="uploadpathtext"></span>
				</tr>

				<tr>
					<td style="text-align:center; vertical-align:middle; padding:30px;">
						<img src="../../exodus/images/theme2/uploadpreview.webp" style="height:40px; width:40px" />
						<br><b>Preview</b>
						<br><span id="thumbnail_size_span"></span>
					</td>
					<td colspan="2" style="text-align:center; vertical-align:middle; padding:30px;">
						<img id="thumbnail" src="" alt="" />
					</td>
				</tr>

				<tr style="display: none">
					<td>
					</td>
					<td>
						<button exodusonclick="yield* loadimages()" class="exodusbutton">
							Refresh
						</button>
					</td>
				</tr>

			</table>

			<span style="display: none">
                <br />
                Destination URL:
                <input id="pathdata" name="pathdata" value="" />
                <br />
                Destination File:
                <input id="filename" name="filename" value="" />
                <br />
                Response URL:
                <input id="redirectpage" name="redirectpage" value="" />
                <br />
			</span>

		</form>

		<div id="images"></div>
	</div>
</body>

</html>
